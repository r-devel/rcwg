[
    {
        "subtype": "bot_message",
        "text": "*[Bug 17839] `R_GetCurrentEnv()` always returns the base namespace*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=17839>\n\nLuke Tierney (<mailto:luke@stat.uiowa.edu|luke@stat.uiowa.edu>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n     Ever confirmed|0                           |1\n                 CC|                            |luke@stat.uiowa.edu\n             Status|UNCONFIRMED                 |CONFIRMED\n\n--- Comment #7 from Luke Tierney (<mailto:luke@stat.uiowa.edu|luke@stat.uiowa.edu>) ---\nSeveral of us would prefer to remove this function. What the correct semantics\nshould be when called from deeper into C code is not obvious, and if it is\ncalled right after entering C via `.Call()` you can get the same result by\nusing `environment()` at the R level and passing the result as an additional\nargument via `.Call()`. We'll need to review what the impact of dropping this\nwould be on package space before making a final decision.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720771865.474559",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "bTUN",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 17839] ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "R_GetCurrentEnv()",
                                "style": {
                                    "bold": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " always returns the base namespace",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=17839"
                            },
                            {
                                "type": "text",
                                "text": "\n\nLuke Tierney ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:luke@stat.uiowa.edu",
                                "text": "luke@stat.uiowa.edu",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n     Ever confirmed|0                           |1\n                 CC|                            |luke@stat.uiowa.edu\n             Status|UNCONFIRMED                 |CONFIRMED\n\n--- Comment #7 from Luke Tierney ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:luke@stat.uiowa.edu",
                                "text": "luke@stat.uiowa.edu",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nSeveral of us would prefer to remove this function. What the correct semantics\nshould be when called from deeper into C code is not obvious, and if it is\ncalled right after entering C via "
                            },
                            {
                                "type": "text",
                                "text": ".Call()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " you can get the same result by\nusing "
                            },
                            {
                                "type": "text",
                                "text": "environment()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " at the R level and passing the result as an additional\nargument via "
                            },
                            {
                                "type": "text",
                                "text": ".Call()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". We'll need to review what the impact of dropping this\nwould be on package space before making a final decision."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18757] New: Add .editorconfig file too the repository*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18757>\n\n            Bug ID: 18757\n           Summary: Add .editorconfig file too the repository\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: Other\n                OS: Other\n            Status: UNCONFIRMED\n          Severity: enhancement\n          Priority: P5\n         Component: Wishlist\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:kirill@cynkra.com|kirill@cynkra.com>\n\nCreated attachment 3368\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3368&amp;action=edit>\nExample .editorconfig file\n\nI discussed briefly with Luke and Michael at the R dev day in Salzburg.\n\n<https:\/\/editorconfig.org\/> is a standard way to define editor settings such as\n\"tab size\" and \"trim whitespace at the end of each line\". The configuration is\na simple text file, .editorconfig, at the root of the project. Settings can be\ndefined by file name glob and by directory (through cascading .editorconfig)\nfiles. It is understood by various editors (through plugins), including Emacs\nand VS Code.\n\nThis will make it easier to declare the most efficient editor settings for this\ncode, and may reduce friction without adding too much overhead.\n\nI'm proposing to add such a file to the root of the R repository. I'm happy to\nmaintain and fine-tune these configurations moving forward. Example file\nattached. Thank you for your consideration.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720779169.174129",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Yz4MH",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18757] New: Add .editorconfig file too the repository",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18757"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18757\n           Summary: Add .editorconfig file too the repository\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: Other\n                OS: Other\n            Status: UNCONFIRMED\n          Severity: enhancement\n          Priority: P5\n         Component: Wishlist\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:kirill@cynkra.com",
                                "text": "kirill@cynkra.com"
                            },
                            {
                                "type": "text",
                                "text": "\n\nCreated attachment 3368\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3368&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3368&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nExample .editorconfig file\n\nI discussed briefly with Luke and Michael at the R dev day in Salzburg.\n\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/editorconfig.org\/"
                            },
                            {
                                "type": "text",
                                "text": " is a standard way to define editor settings such as\n\"tab size\" and \"trim whitespace at the end of each line\". The configuration is\na simple text file, .editorconfig, at the root of the project. Settings can be\ndefined by file name glob and by directory (through cascading .editorconfig)\nfiles. It is understood by various editors (through plugins), including Emacs\nand VS Code.\n\nThis will make it easier to declare the most efficient editor settings for this\ncode, and may reduce friction without adding too much overhead.\n\nI'm proposing to add such a file to the root of the R repository. I'm happy to\nmaintain and fine-tune these configurations moving forward. Example file\nattached. Thank you for your consideration."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18758] New: segfaults on quartz() device*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18758>\n\n            Bug ID: 18758\n           Summary: segfaults on quartz() device\n           Product: R\n           Version: R 4.4.x\n          Hardware: x86_64\/x64\/amd64 (64-bit)\n                OS: macOS\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Graphics\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:cybergeorge2020@gmail.com|cybergeorge2020@gmail.com>\n\nThe description of a problem and whole work on bugfixing is done here:\n<https:\/\/github.com\/r-devel\/r-dev-day\/issues\/17>",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720780073.851769",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ygeb",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18758] New: segfaults on quartz() device",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18758"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18758\n           Summary: segfaults on quartz() device\n           Product: R\n           Version: R 4.4.x\n          Hardware: x86_64\/x64\/amd64 (64-bit)\n                OS: macOS\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Graphics\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:cybergeorge2020@gmail.com",
                                "text": "cybergeorge2020@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": "\n\nThe description of a problem and whole work on bugfixing is done here:\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-devel\/r-dev-day\/issues\/17"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18758] segfaults on quartz() device*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18758>\n\n--- Comment #1 from Tomek Gieorgijewski (<mailto:cybergeorge2020@gmail.com|cybergeorge2020@gmail.com>) ---\nCreated attachment 3369\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3369&amp;action=edit>\nProposed patch.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720780429.111069",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "JqTtT",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18758] segfaults on quartz() device",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18758"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #1 from Tomek Gieorgijewski ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:cybergeorge2020@gmail.com",
                                "text": "cybergeorge2020@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCreated attachment 3369\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3369&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3369&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nProposed patch."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18759] New: ALTREP: Use read only pointer for atomic vectors in `duplicate1()`*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18759>\n\n            Bug ID: 18759\n           Summary: ALTREP: Use read only pointer for atomic vectors in\n                    `duplicate1()`\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Low-level\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:davis@posit.co|davis@posit.co>\n\nCreated attachment 3370\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3370&amp;action=edit>\nPatch where RO functions are now used\n\n`duplicate1()` uses `INTEGER()` (and other writable pointer accessors) when it\ncould use `INTEGER_RO()` instead since it only needs read only access to the\ndata. This would allow some ALTREP classes (like a \"view\" class) to be\nduplicated without fully materializing the ALTREP vector.\n\nThe attached patch switches `duplicate1()` to the `RO` functions.\n\n---\n\nBug originally reported at r-dev-day PLUS 2024:\n\n<https:\/\/github.com\/r-devel\/r-dev-day\/issues\/23>\n\nFull GitHub PR with passing tests:\n\n<https:\/\/github.com\/r-devel\/r-svn\/pull\/168>\n\nJoint work done by:\nDavis Vaughan\nKonstantin Emil Thiel\nKirill Mueller\nGabe Becker\n\n---\n\nIt was difficult to think of a way to test this, so in rlang we will add tests\nfor this with our ALTREP view class, and hopefully that will prevent this from\naccidentally breaking in R in the future.\n\nHere is an example of it working now using this rlang PR where ALTREP views are\nbeing implemented <https:\/\/github.com\/r-lib\/rlang\/pull\/1725>:\n\nBefore:\n\n```\n# Some integers\nbase &lt;- sample(1e6)\n\n# Take an ALTREP slice\nx &lt;- rlang:::vec_view(base, start = 1L, size = 100L)\n\n# Not materialized\nrlang:::view_is_materialized(x)\n#&gt; [1] FALSE\n\n# Force the duplication\ny &lt;- `[&lt;-`(x, 1, 2)\n\n# Unfortunately, materialized\nrlang:::view_is_materialized(x)\n#&gt; [1] TRUE\n```\n\nAfter:\n\n```\n# Some integers\nbase &lt;- sample(1e6)\n\n# Take an ALTREP slice\nx &lt;- rlang:::vec_view(base, start = 1L, size = 100L)\n\n# Not materialized\nrlang:::view_is_materialized(x)\n#&gt; [1] FALSE\n\n# Force the duplication\ny &lt;- `[&lt;-`(x, 1, 2)\n\n# No longer materialized\nrlang:::view_is_materialized(x)\n#&gt; [1] FALSE\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720780983.631409",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "DRZ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18759] New: ALTREP: Use read only pointer for atomic vectors in ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "duplicate1()",
                                "style": {
                                    "bold": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18759"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18759\n           Summary: ALTREP: Use read only pointer for atomic vectors in\n                    "
                            },
                            {
                                "type": "text",
                                "text": "duplicate1()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Low-level\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:davis@posit.co",
                                "text": "davis@posit.co"
                            },
                            {
                                "type": "text",
                                "text": "\n\nCreated attachment 3370\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3370&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3370&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nPatch where RO functions are now used\n\n"
                            },
                            {
                                "type": "text",
                                "text": "duplicate1()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " uses "
                            },
                            {
                                "type": "text",
                                "text": "INTEGER()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " (and other writable pointer accessors) when it\ncould use "
                            },
                            {
                                "type": "text",
                                "text": "INTEGER_RO()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " instead since it only needs read only access to the\ndata. This would allow some ALTREP classes (like a \"view\" class) to be\nduplicated without fully materializing the ALTREP vector.\n\nThe attached patch switches "
                            },
                            {
                                "type": "text",
                                "text": "duplicate1()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to the "
                            },
                            {
                                "type": "text",
                                "text": "RO",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " functions.\n\n---\n\nBug originally reported at r-dev-day PLUS 2024:\n\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-devel\/r-dev-day\/issues\/23"
                            },
                            {
                                "type": "text",
                                "text": "\n\nFull GitHub PR with passing tests:\n\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-devel\/r-svn\/pull\/168"
                            },
                            {
                                "type": "text",
                                "text": "\n\nJoint work done by:\nDavis Vaughan\nKonstantin Emil Thiel\nKirill Mueller\nGabe Becker\n\n---\n\nIt was difficult to think of a way to test this, so in rlang we will add tests\nfor this with our ALTREP view class, and hopefully that will prevent this from\naccidentally breaking in R in the future.\n\nHere is an example of it working now using this rlang PR where ALTREP views are\nbeing implemented "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-lib\/rlang\/pull\/1725"
                            },
                            {
                                "type": "text",
                                "text": ":\n\nBefore:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "# Some integers\nbase <- sample(1e6)\n\n# Take an ALTREP slice\nx <- rlang:::vec_view(base, start = 1L, size = 100L)\n\n# Not materialized\nrlang:::view_is_materialized(x)\n#> [1] FALSE\n\n# Force the duplication\ny <- `[<-`(x, 1, 2)\n\n# Unfortunately, materialized\nrlang:::view_is_materialized(x)\n#> [1] TRUE\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nAfter:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "# Some integers\nbase <- sample(1e6)\n\n# Take an ALTREP slice\nx <- rlang:::vec_view(base, start = 1L, size = 100L)\n\n# Not materialized\nrlang:::view_is_materialized(x)\n#> [1] FALSE\n\n# Force the duplication\ny <- `[<-`(x, 1, 2)\n\n# No longer materialized\nrlang:::view_is_materialized(x)\n#> [1] FALSE\n"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18760] New: Memory leak when sink()-ing messages*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18760>\n\n            Bug ID: 18760\n           Summary: Memory leak when sink()-ing messages\n           Product: R\n           Version: R 4.4.x\n          Hardware: Other\n                OS: Other\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Low-level\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:george.stagg@posit.co|george.stagg@posit.co>\n\nWhen sinking messages to file some memory is leaked (according to `gc()`) after\nthe sink has been removed. Before `Ncells` is 297470, after `Ncells` is 299238.\n\nIn `sink.R:24`, `file` is set to the result of `stderr()`.\n\nLater in `connections.c:5343`, the argument is converted into an integer named\n`icon` (2 for `stderr`). Then a branch checks if `icon &lt; 0`, and releases some\n`ex_ptr` object in the connection. I believe that `icon` always becomes 2 when\nremoving the sink with `sink(NULL, type=\"message\")`, and so the branch\nreleasing the object won't be taken.\n\nMy understanding of the code logic is that `sink.R:24` should read\n\n```\nif(is.null(file)) file &lt;- -1\n```\n\nsimilarly to the other branch, at `sink.R:31`.\n\nLine numbers as of revision 70318.\n\nLog from R:\n\n```\n&gt; gc()\n         used (Mb) gc trigger (Mb) limit (Mb) max used (Mb)\nNcells 297470 15.9     701077 37.5         NA   487447 26.1\nVcells 608113  4.7    8388608 64.0      32768  1967523 15.1\n[... a few repeats...]\n&gt; gc()\n         used (Mb) gc trigger (Mb) limit (Mb) max used (Mb)\nNcells 297470 15.9     701077 37.5         NA   487447 26.1\nVcells 608113  4.7    8388608 64.0      32768  1967523 15.1\n&gt;\n&gt; sink(file=file(\"\/tmp\/testfile.txt\", \"w\"), type = \"message\")\n&gt; message(\"hello\")\n&gt; sink(type = \"message\")\n&gt; \n&gt; gc()\n         used (Mb) gc trigger (Mb) limit (Mb) max used (Mb)\nNcells 299233 16.0     701077 37.5         NA   487447 26.1\nVcells 611330  4.7    8388608 64.0      32768  1967523 15.1\n[... a few repeats...]\n&gt; gc()\n         used (Mb) gc trigger (Mb) limit (Mb) max used (Mb)\nNcells 299238 16.0     701077 37.5         NA   487447 26.1\nVcells 611349  4.7    8388608 64.0      32768  1967523 15.1\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720781436.259279",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "PObu",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18760] New: Memory leak when sink()-ing messages",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18760"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18760\n           Summary: Memory leak when sink()-ing messages\n           Product: R\n           Version: R 4.4.x\n          Hardware: Other\n                OS: Other\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Low-level\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:george.stagg@posit.co",
                                "text": "george.stagg@posit.co"
                            },
                            {
                                "type": "text",
                                "text": "\n\nWhen sinking messages to file some memory is leaked (according to "
                            },
                            {
                                "type": "text",
                                "text": "gc()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ") after\nthe sink has been removed. Before "
                            },
                            {
                                "type": "text",
                                "text": "Ncells",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is 297470, after "
                            },
                            {
                                "type": "text",
                                "text": "Ncells",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is 299238.\n\nIn "
                            },
                            {
                                "type": "text",
                                "text": "sink.R:24",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", "
                            },
                            {
                                "type": "text",
                                "text": "file",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is set to the result of "
                            },
                            {
                                "type": "text",
                                "text": "stderr()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ".\n\nLater in "
                            },
                            {
                                "type": "text",
                                "text": "connections.c:5343",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", the argument is converted into an integer named\n"
                            },
                            {
                                "type": "text",
                                "text": "icon",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " (2 for "
                            },
                            {
                                "type": "text",
                                "text": "stderr",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "). Then a branch checks if "
                            },
                            {
                                "type": "text",
                                "text": "icon < 0",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", and releases some\n"
                            },
                            {
                                "type": "text",
                                "text": "ex_ptr",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " object in the connection. I believe that "
                            },
                            {
                                "type": "text",
                                "text": "icon",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " always becomes 2 when\nremoving the sink with "
                            },
                            {
                                "type": "text",
                                "text": "sink(NULL, type=\"message\")",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", and so the branch\nreleasing the object won't be taken.\n\nMy understanding of the code logic is that "
                            },
                            {
                                "type": "text",
                                "text": "sink.R:24",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " should read\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "if(is.null(file)) file <- -1\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nsimilarly to the other branch, at "
                            },
                            {
                                "type": "text",
                                "text": "sink.R:31",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ".\n\nLine numbers as of revision 70318.\n\nLog from R:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "> gc()\n         used (Mb) gc trigger (Mb) limit (Mb) max used (Mb)\nNcells 297470 15.9     701077 37.5         NA   487447 26.1\nVcells 608113  4.7    8388608 64.0      32768  1967523 15.1\n[... a few repeats...]\n> gc()\n         used (Mb) gc trigger (Mb) limit (Mb) max used (Mb)\nNcells 297470 15.9     701077 37.5         NA   487447 26.1\nVcells 608113  4.7    8388608 64.0      32768  1967523 15.1\n>\n> sink(file=file(\"\/tmp\/testfile.txt\", \"w\"), type = \"message\")\n> message(\"hello\")\n> sink(type = \"message\")\n> \n> gc()\n         used (Mb) gc trigger (Mb) limit (Mb) max used (Mb)\nNcells 299233 16.0     701077 37.5         NA   487447 26.1\nVcells 611330  4.7    8388608 64.0      32768  1967523 15.1\n[... a few repeats...]\n> gc()\n         used (Mb) gc trigger (Mb) limit (Mb) max used (Mb)\nNcells 299238 16.0     701077 37.5         NA   487447 26.1\nVcells 611349  4.7    8388608 64.0      32768  1967523 15.1\n"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18736] _R_CHECK_THINGS_IN_OTHER_DIRS_ does not work on Windows*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18736>\n\nMikko Korpela (<mailto:mvkorpel@iki.fi|mvkorpel@iki.fi>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |mvkorpel@iki.fi\n\n--- Comment #1 from Mikko Korpela (<mailto:mvkorpel@iki.fi|mvkorpel@iki.fi>) ---\nThe latest development documentation of `<http:\/\/file.info|file.info>()` contains the following:\n\n&gt; The `uid`, `gid`, `uname` and `grname` columns may not be supplied\n&gt; on a non-POSIX Unix-alike system, and except `uname` will not be on Windows.\n\nIt appears that the `uname` column on Windows is supported since R-devel r86686\n(June 4) with a patch by Tomas Kalibera. The svn commit message (observed via\nthe wch GitHub mirror of R source code) mentions this bug ID, 18736.\n\nIn my test with `_R_CHECK_THINGS_IN_OTHER_DIRS_=true` on R-devel r86890\n(Windows 11), all package checks completed although there were some \"cannot\nresolve owner of file\" messages on the console. Those warnings did not result\nin any NOTE, WARN or ERROR about the package being tested.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720785475.311789",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "bIVP",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18736] ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "R_CHECK_THINGS_IN_OTHER_DIRS",
                                "style": {
                                    "bold": true,
                                    "italic": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " does not work on Windows",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18736"
                            },
                            {
                                "type": "text",
                                "text": "\n\nMikko Korpela ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:mvkorpel@iki.fi",
                                "text": "mvkorpel@iki.fi"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |mvkorpel@iki.fi\n\n--- Comment #1 from Mikko Korpela ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:mvkorpel@iki.fi",
                                "text": "mvkorpel@iki.fi"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nThe latest development documentation of "
                            },
                            {
                                "type": "link",
                                "url": "http:\/\/file.info",
                                "text": "file.info",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " contains the following:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The "
                            },
                            {
                                "type": "text",
                                "text": "uid",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", "
                            },
                            {
                                "type": "text",
                                "text": "gid",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", "
                            },
                            {
                                "type": "text",
                                "text": "uname",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "text",
                                "text": "grname",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " columns may not be supplied\non a non-POSIX Unix-alike system, and except "
                            },
                            {
                                "type": "text",
                                "text": "uname",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " will not be on Windows."
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nIt appears that the "
                            },
                            {
                                "type": "text",
                                "text": "uname",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " column on Windows is supported since R-devel r86686\n(June 4) with a patch by Tomas Kalibera. The svn commit message (observed via\nthe wch GitHub mirror of R source code) mentions this bug ID, 18736.\n\nIn my test with "
                            },
                            {
                                "type": "text",
                                "text": "_R_CHECK_THINGS_IN_OTHER_DIRS_=true",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " on R-devel r86890\n(Windows 11), all package checks completed although there were some \"cannot\nresolve owner of file\" messages on the console. Those warnings did not result\nin any NOTE, WARN or ERROR about the package being tested."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18729] dump() error behavior for list = character() depends on output mode*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18729>\n\nGabriel Becker (<mailto:gabembecker@gmail.com|gabembecker@gmail.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |gabembecker@gmail.com\n\n--- Comment #1 from Gabriel Becker (<mailto:gabembecker@gmail.com|gabembecker@gmail.com>) ---\nCreated attachment 3371\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3371&amp;action=edit>\npatch to have dump return character() when dumping nothing when file is a\nconnection\n\nPatch moving existing escape hatch when none of the objects to be dumped exist\nfrom within if(is.character(file)) {} to the top level for consistency across\nconnection- and character-specified file.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720785783.881059",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "m5AS",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18729] dump() error behavior for list = character() depends on output mode",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18729"
                            },
                            {
                                "type": "text",
                                "text": "\n\nGabriel Becker ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:gabembecker@gmail.com",
                                "text": "gabembecker@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |gabembecker@gmail.com\n\n--- Comment #1 from Gabriel Becker ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:gabembecker@gmail.com",
                                "text": "gabembecker@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCreated attachment 3371\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3371&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3371&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\npatch to have dump return character() when dumping nothing when file is a\nconnection\n\nPatch moving existing escape hatch when none of the objects to be dumped exist\nfrom within if(is.character(file)) {} to the top level for consistency across\nconnection- and character-specified file."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18758] segfaults on quartz() device*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18758>\n\nSimon Urbanek (<mailto:simon.urbanek@r-project.org|simon.urbanek@r-project.org>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|UNCONFIRMED                 |CLOSED\n                 CC|                            |simon.urbanek@r-project.org\n         Resolution|---                         |FIXED\n\n--- Comment #2 from Simon Urbanek (<mailto:simon.urbanek@r-project.org|simon.urbanek@r-project.org>) ---\nIssue: spaces in fonts when used the new glyph API and Quartz could lead to a\nsegfault since they are illegal in URLs, so `\"file:\/\/\/...\/This Font.tff\"`\nreturns `NULL` as URL and leads to segfault. Reproducible example:\n\n```\nlibrary(grid)\nfont &lt;- glyphFont(file.path(\"\", \"System\", \"Library\", \"Fonts\", \"Supplemental\",\n\"Courier New.ttf\"), 0, \"Courier New\", 400, \"normal\")\nglyph &lt;- glyphInfo(id=56, x=0, y=0, font=1, size=36, glyphFontList(font),\n                   width=25, height=30)\ngrid.glyph(glyph)\n```\n\nThanks! Now merged in r86891",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720786066.769559",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "6CE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18758] segfaults on quartz() device",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18758"
                            },
                            {
                                "type": "text",
                                "text": "\n\nSimon Urbanek ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:simon.urbanek@r-project.org",
                                "text": "simon.urbanek@r-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|UNCONFIRMED                 |CLOSED\n                 CC|                            |simon.urbanek@r-project.org\n         Resolution|---                         |FIXED\n\n--- Comment #2 from Simon Urbanek ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:simon.urbanek@r-project.org",
                                "text": "simon.urbanek@r-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nIssue: spaces in fonts when used the new glyph API and Quartz could lead to a\nsegfault since they are illegal in URLs, so "
                            },
                            {
                                "type": "text",
                                "text": "\"file:\/\/\/...\/This Font.tff\"",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nreturns "
                            },
                            {
                                "type": "text",
                                "text": "NULL",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " as URL and leads to segfault. Reproducible example:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "library(grid)\nfont <- glyphFont(file.path(\"\", \"System\", \"Library\", \"Fonts\", \"Supplemental\",\n\"Courier New.ttf\"), 0, \"Courier New\", 400, \"normal\")\nglyph <- glyphInfo(id=56, x=0, y=0, font=1, size=36, glyphFontList(font),\n                   width=25, height=30)\ngrid.glyph(glyph)\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nThanks! Now merged in r86891"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18761] New: ALTREP: Use read only pointer for atomic vectors in `R_compute_identical()`*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18761>\n\n            Bug ID: 18761\n           Summary: ALTREP: Use read only pointer for atomic vectors in\n                    `R_compute_identical()`\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Low-level\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:davis@posit.co|davis@posit.co>\n\nCreated attachment 3372\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3372&amp;action=edit>\nPatch where RO functions are now used\n\n`R_compute_identical()` uses `INTEGER()` (and other writable pointer accessors)\nwhen it could use INTEGER_RO() instead since it only needs read only access to\nthe data. This would allow some ALTREP classes (like a \"view\" class) to call\nthe R level `identical()` function without fully materializing the ALTREP\nvector.\n\nThe attached patch switches `R_compute_identical()` to the `RO` functions.\n\nBug originally reported at r-dev-day PLUS 2024:\n\n<https:\/\/github.com\/r-devel\/r-dev-day\/issues\/23>\n\nFull GitHub PR with passing tests:\n\n<https:\/\/github.com\/r-devel\/r-svn\/pull\/170>\n\nJoint work done by:\nDavis Vaughan\nKonstantin Emil Thiel\nKirill Mueller\nGabe Becker\n\nHere is an example of it working now using this rlang PR where ALTREP views are\nbeing implemented <https:\/\/github.com\/r-lib\/rlang\/pull\/1725>:\n\n```\n# integers - identical\nbase &lt;- sample(1e6)\nx &lt;- base[1:100]\ny &lt;- rlang:::vec_view(base, start = 1L, size = 100L)\n\nidentical(x, y)\n#&gt; [1] TRUE\n\n# before\nrlang:::view_is_materialized(y)\n#&gt; [1] TRUE\n\n# after\nrlang:::view_is_materialized(y)\n#&gt; [1] FALSE\n\n# -------\n\n# doubles - identical\nbase &lt;- sample(1e6) + .5\nx &lt;- base[1:100]\ny &lt;- rlang:::vec_view(base, start = 1L, size = 100L)\n\nidentical(x, y)\n#&gt; [1] TRUE\n\n# before\nrlang:::view_is_materialized(y)\n#&gt; [1] TRUE\n\n# after\nrlang:::view_is_materialized(y)\n#&gt; [1] FALSE\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720786937.027789",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "J6tL",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18761] New: ALTREP: Use read only pointer for atomic vectors in ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "R_compute_identical()",
                                "style": {
                                    "bold": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18761"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18761\n           Summary: ALTREP: Use read only pointer for atomic vectors in\n                    "
                            },
                            {
                                "type": "text",
                                "text": "R_compute_identical()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Low-level\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:davis@posit.co",
                                "text": "davis@posit.co"
                            },
                            {
                                "type": "text",
                                "text": "\n\nCreated attachment 3372\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3372&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3372&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nPatch where RO functions are now used\n\n"
                            },
                            {
                                "type": "text",
                                "text": "R_compute_identical()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " uses "
                            },
                            {
                                "type": "text",
                                "text": "INTEGER()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " (and other writable pointer accessors)\nwhen it could use INTEGER_RO() instead since it only needs read only access to\nthe data. This would allow some ALTREP classes (like a \"view\" class) to call\nthe R level "
                            },
                            {
                                "type": "text",
                                "text": "identical()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " function without fully materializing the ALTREP\nvector.\n\nThe attached patch switches "
                            },
                            {
                                "type": "text",
                                "text": "R_compute_identical()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to the "
                            },
                            {
                                "type": "text",
                                "text": "RO",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " functions.\n\nBug originally reported at r-dev-day PLUS 2024:\n\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-devel\/r-dev-day\/issues\/23"
                            },
                            {
                                "type": "text",
                                "text": "\n\nFull GitHub PR with passing tests:\n\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-devel\/r-svn\/pull\/170"
                            },
                            {
                                "type": "text",
                                "text": "\n\nJoint work done by:\nDavis Vaughan\nKonstantin Emil Thiel\nKirill Mueller\nGabe Becker\n\nHere is an example of it working now using this rlang PR where ALTREP views are\nbeing implemented "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-lib\/rlang\/pull\/1725"
                            },
                            {
                                "type": "text",
                                "text": ":\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "# integers - identical\nbase <- sample(1e6)\nx <- base[1:100]\ny <- rlang:::vec_view(base, start = 1L, size = 100L)\n\nidentical(x, y)\n#> [1] TRUE\n\n# before\nrlang:::view_is_materialized(y)\n#> [1] TRUE\n\n# after\nrlang:::view_is_materialized(y)\n#> [1] FALSE\n\n# -------\n\n# doubles - identical\nbase <- sample(1e6) + .5\nx <- base[1:100]\ny <- rlang:::vec_view(base, start = 1L, size = 100L)\n\nidentical(x, y)\n#> [1] TRUE\n\n# before\nrlang:::view_is_materialized(y)\n#> [1] TRUE\n\n# after\nrlang:::view_is_materialized(y)\n#> [1] FALSE\n"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18591] strwidth returns wrong value on first call from terminal*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18591>\n\n--- Comment #2 from Gabriel Becker (<mailto:gabembecker@gmail.com|gabembecker@gmail.com>) ---\nIn fact, this occurs every time there is no active graphics device, and does\noccur in current R-devel.\n\n```\n&gt; library(graphics)\n&gt; strwidth(\"string\", units = \"inches\")\n[1] 0.8333333\n&gt; strwidth(\"string\", units = \"inches\")\n[1] 0.4075521\n&gt; dev.off()\nnull device \n          1 \n&gt; strwidth(\"string\", units = \"inches\")\n[1] 0.8333333\n&gt; strwidth(\"string\", units = \"inches\")\n[1] 0.4075521\n&gt; sessionInfo()\nR Under development (unstable) (2024-07-11 r86890)\nPlatform: aarch64-apple-darwin23.5.0\nRunning under: macOS Sonoma 14.5\n\nMatrix products: default\nBLAS:  \n\/Users\/gbecker\/local\/Rdevelraw\/R.framework\/Versions\/4.5\/Resources\/lib\/libRblas.dylib \nLAPACK:\n\/Users\/gbecker\/local\/Rdevelraw\/R.framework\/Versions\/4.5\/Resources\/lib\/libRlapack.dylib;\n LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8\/en_US.UTF-8\/en_US.UTF-8\/C\/en_US.UTF-8\/en_US.UTF-8\n\ntime zone: Europe\/Vienna\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n[1] compiler_4.5.0\n\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720787050.620379",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "JRcF",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18591] strwidth returns wrong value on first call from terminal",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18591"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #2 from Gabriel Becker ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:gabembecker@gmail.com",
                                "text": "gabembecker@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nIn fact, this occurs every time there is no active graphics device, and does\noccur in current R-devel.\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "> library(graphics)\n> strwidth(\"string\", units = \"inches\")\n[1] 0.8333333\n> strwidth(\"string\", units = \"inches\")\n[1] 0.4075521\n> dev.off()\nnull device \n          1 \n> strwidth(\"string\", units = \"inches\")\n[1] 0.8333333\n> strwidth(\"string\", units = \"inches\")\n[1] 0.4075521\n> sessionInfo()\nR Under development (unstable) (2024-07-11 r86890)\nPlatform: aarch64-apple-darwin23.5.0\nRunning under: macOS Sonoma 14.5\n\nMatrix products: default\nBLAS:  \n\/Users\/gbecker\/local\/Rdevelraw\/R.framework\/Versions\/4.5\/Resources\/lib\/libRblas.dylib \nLAPACK:\n\/Users\/gbecker\/local\/Rdevelraw\/R.framework\/Versions\/4.5\/Resources\/lib\/libRlapack.dylib;\n LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8\/en_US.UTF-8\/en_US.UTF-8\/C\/en_US.UTF-8\/en_US.UTF-8\n\ntime zone: Europe\/Vienna\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nloaded via a namespace (and not attached):\n[1] compiler_4.5.0\n\n"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18762] New: Making R internals more ALTREP friendly: copyVector()*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18762>\n\n            Bug ID: 18762\n           Summary: Making R internals more ALTREP friendly: copyVector()\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Low-level\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:kirill@cynkra.com|kirill@cynkra.com>\n\nCreated attachment 3373\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3373&amp;action=edit>\nSuggested patch\n\n`copyVector()` uses `INTEGER()` (and other writable pointer accessors) when it\ncould use `INTEGER_RO()` instead, since it only needs read only access to the\ndata. This would allow some ALTREP classes (like a \"view\" class) to be\nduplicated without fully materializing the ALTREP vector.\n\nThe attached patch switches `copyVector()` to the RO functions.\n\nBug originally reported at r-dev-day PLUS 2024:\n<https:\/\/github.com\/r-devel\/r-dev-day\/issues\/23>\n\nFull GitHub PR with passing tests:\n<https:\/\/github.com\/r-devel\/r-svn\/pull\/169>\n\nJoint work done by:\nDavis Vaughan\nKonstantin Emil Thiel\nKirill Mller\nGabe Becker\n\nRelated: <https:\/\/bugs.r-project.org\/show_bug.cgi?id=18759>\n\nHere is an example of it working now using this rlang PR where ALTREP views are\nbeing implemented <https:\/\/github.com\/r-lib\/rlang\/pull\/1725>:\n\n```\n# Some integers\nbase &lt;- sample(1e6)\n\n# A view into those values\nx &lt;- rlang:::vec_view(base, start = 1L, size = 100L)\n\n# Make a matrix (this calls `copyVector()`)\ny &lt;- matrix(x, nrow = 1L, byrow = FALSE)\n\n# Before:\n# Materialized `x`\nrlang:::view_is_materialized(x)\n#&gt; [1] TRUE\n\n# After:\n# No longer materializes `x`!\nrlang:::view_is_materialized(x)\n#&gt; [1] FALSE\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720788362.595429",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "FYl",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18762] New: Making R internals more ALTREP friendly: copyVector()",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18762"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18762\n           Summary: Making R internals more ALTREP friendly: copyVector()\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Low-level\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:kirill@cynkra.com",
                                "text": "kirill@cynkra.com"
                            },
                            {
                                "type": "text",
                                "text": "\n\nCreated attachment 3373\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3373&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3373&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nSuggested patch\n\n"
                            },
                            {
                                "type": "text",
                                "text": "copyVector()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " uses "
                            },
                            {
                                "type": "text",
                                "text": "INTEGER()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " (and other writable pointer accessors) when it\ncould use "
                            },
                            {
                                "type": "text",
                                "text": "INTEGER_RO()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " instead, since it only needs read only access to the\ndata. This would allow some ALTREP classes (like a \"view\" class) to be\nduplicated without fully materializing the ALTREP vector.\n\nThe attached patch switches "
                            },
                            {
                                "type": "text",
                                "text": "copyVector()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to the RO functions.\n\nBug originally reported at r-dev-day PLUS 2024:\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-devel\/r-dev-day\/issues\/23"
                            },
                            {
                                "type": "text",
                                "text": "\n\nFull GitHub PR with passing tests:\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-devel\/r-svn\/pull\/169"
                            },
                            {
                                "type": "text",
                                "text": "\n\nJoint work done by:\nDavis Vaughan\nKonstantin Emil Thiel\nKirill Mller\nGabe Becker\n\nRelated: "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18759"
                            },
                            {
                                "type": "text",
                                "text": "\n\nHere is an example of it working now using this rlang PR where ALTREP views are\nbeing implemented "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-lib\/rlang\/pull\/1725"
                            },
                            {
                                "type": "text",
                                "text": ":\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "# Some integers\nbase <- sample(1e6)\n\n# A view into those values\nx <- rlang:::vec_view(base, start = 1L, size = 100L)\n\n# Make a matrix (this calls `copyVector()`)\ny <- matrix(x, nrow = 1L, byrow = FALSE)\n\n# Before:\n# Materialized `x`\nrlang:::view_is_materialized(x)\n#> [1] TRUE\n\n# After:\n# No longer materializes `x`!\nrlang:::view_is_materialized(x)\n#> [1] FALSE\n"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18674] tools::toTitleCase() incorrectly capitalizes conjunctions (e.g. 'and') when using suspensive hyphenation*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18674>\n\nSarah Zeller (<mailto:s.zeller@posteo.net|s.zeller@posteo.net>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |s.zeller@posteo.net\n\n--- Comment #1 from Sarah Zeller (<mailto:s.zeller@posteo.net|s.zeller@posteo.net>) ---\nThe issue we're aiming to solve the following issue: After a hyphen, words that\nshould not be capitalized are being capitalized. Examples include and, or, to,\nas specified in `lpat` earlier in the toTitleCase().\n\nIn the code, there are already lines checking for words following hyphens, to\nmake sure they are capitalized. We add a check in this part, where we exclude\nthose specific cases of forbidden words following a hyphen. This prevents\nsuch words from being incorrectly capitalized.\n\nNote: We created a PR to r-svn and all checks have passed.\nLink to PR: <https:\/\/github.com\/r-devel\/r-svn\/pull\/172>\n\n```\nFrom 131a6c39bc00db3da73ef4449b13c53ed429aec3 Mon Sep 17 00:00:00 2001",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720792425.362559",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1bGh",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18674] tools::toTitleCase() incorrectly capitalizes conjunctions (e.g. 'and') when using suspensive hyphenation",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18674"
                            },
                            {
                                "type": "text",
                                "text": "\n\nSarah Zeller ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:s.zeller@posteo.net",
                                "text": "s.zeller@posteo.net"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |s.zeller@posteo.net\n\n--- Comment #1 from Sarah Zeller ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:s.zeller@posteo.net",
                                "text": "s.zeller@posteo.net"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nThe issue we're aiming to solve the following issue: After a hyphen, words that\nshould not be capitalized are being capitalized. Examples include and, or, to,\nas specified in "
                            },
                            {
                                "type": "text",
                                "text": "lpat",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " earlier in the toTitleCase().\n\nIn the code, there are already lines checking for words following hyphens, to\nmake sure they are capitalized. We add a check in this part, where we exclude\nthose specific cases of forbidden words following a hyphen. This prevents\nsuch words from being incorrectly capitalized.\n\nNote: We created a PR to r-svn and all checks have passed.\nLink to PR: "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-devel\/r-svn\/pull\/172"
                            },
                            {
                                "type": "text",
                                "text": "\n\n```\nFrom 131a6c39bc00db3da73ef4449b13c53ed429aec3 Mon Sep 17 00:00:00 2001"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18756] missing whitespace before @key{} command*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18756>\n\nSebastian Meyer (<mailto:seb.meyer@fau.de|seb.meyer@fau.de>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n         Resolution|---                         |FIXED\n                 CC|                            |seb.meyer@fau.de\n             Status|UNCONFIRMED                 |CLOSED\n\n--- Comment #1 from Sebastian Meyer (<mailto:seb.meyer@fau.de|seb.meyer@fau.de>) ---\nThanks. I agree \"signal 0RET\" was confusing. The Texinfo manual indeed\nrecommends adding spaces for clarity\n(<https:\/\/www.gnu.org\/software\/texinfo\/manual\/texinfo\/html_node\/_0040kbd.html>),\nbut one could also append the instruction to press the return key for even less\nambiguity. Committed as c86893, including related fixes of @key and @kbd in\nrw-FAQ.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720795022.715349",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "S1OQ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18756] missing whitespace before @key{} command",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18756"
                            },
                            {
                                "type": "text",
                                "text": "\n\nSebastian Meyer ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:seb.meyer@fau.de",
                                "text": "seb.meyer@fau.de"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n         Resolution|---                         |FIXED\n                 CC|                            |seb.meyer@fau.de\n             Status|UNCONFIRMED                 |CLOSED\n\n--- Comment #1 from Sebastian Meyer ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:seb.meyer@fau.de",
                                "text": "seb.meyer@fau.de"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nThanks. I agree \"signal 0RET\" was confusing. The Texinfo manual indeed\nrecommends adding spaces for clarity\n("
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/www.gnu.org\/software\/texinfo\/manual\/texinfo\/html_node\/_0040kbd.html"
                            },
                            {
                                "type": "text",
                                "text": "),\nbut one could also append the instruction to press the return key for even less\nambiguity. Committed as c86893, including related fixes of @key and @kbd in\nrw-FAQ."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 8934] Irregularity in stem() display*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=8934>\n\nElla Kaye (<mailto:ella.kaye@gmail.com|ella.kaye@gmail.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |ella.kaye@gmail.com\n\n--- Comment #5 from Ella Kaye (<mailto:ella.kaye@gmail.com|ella.kaye@gmail.com>) ---\nCreated attachment 3374\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3374&amp;action=edit>\nPatch to fix non-alignment of vertical bars.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720795194.301609",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "1D3",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 8934] Irregularity in stem() display",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=8934"
                            },
                            {
                                "type": "text",
                                "text": "\n\nElla Kaye ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:ella.kaye@gmail.com",
                                "text": "ella.kaye@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |ella.kaye@gmail.com\n\n--- Comment #5 from Ella Kaye ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:ella.kaye@gmail.com",
                                "text": "ella.kaye@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCreated attachment 3374\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3374&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3374&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nPatch to fix non-alignment of vertical bars."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 8934] Irregularity in stem() display*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=8934>\n\n--- Comment #6 from Ella Kaye (<mailto:ella.kaye@gmail.com|ella.kaye@gmail.com>) ---\nComment on attachment 3374\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3374>\nPatch to fix non-alignment of vertical bars.\n\nKelly Bodwin and I are proposing a patch which fixes the first issue raised in\nthis bug report, namely the non-alignment of vertical bars. To do this, we need\nto calculate the value of `ndigits` which gets passed to the first call to\n`stem_print` based on rounded values of x[0] and x[n-1]. We created new\nvariables, `lo_nd` and `hi_nd` for this purpose.\n\nMany thanks to Paul Murrell and Martin Maechler for their help :)",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720795489.474439",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "gtz",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 8934] Irregularity in stem() display",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=8934"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #6 from Ella Kaye ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:ella.kaye@gmail.com",
                                "text": "ella.kaye@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nComment on attachment 3374\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3374"
                            },
                            {
                                "type": "text",
                                "text": "\nPatch to fix non-alignment of vertical bars.\n\nKelly Bodwin and I are proposing a patch which fixes the first issue raised in\nthis bug report, namely the non-alignment of vertical bars. To do this, we need\nto calculate the value of "
                            },
                            {
                                "type": "text",
                                "text": "ndigits",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " which gets passed to the first call to\n"
                            },
                            {
                                "type": "text",
                                "text": "stem_print",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " based on rounded values of x[0] and x[n-1]. We created new\nvariables, "
                            },
                            {
                                "type": "text",
                                "text": "lo_nd",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "text",
                                "text": "hi_nd",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " for this purpose.\n\nMany thanks to Paul Murrell and Martin Maechler for their help :)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 8934] Irregularity in stem() display*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=8934>\n\nKelly Nicole Bodwin (<mailto:kelly@bodwin.us|kelly@bodwin.us>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |kelly@bodwin.us\n\n--- Comment #7 from Kelly Nicole Bodwin (<mailto:kelly@bodwin.us|kelly@bodwin.us>) ---\nCommenting to be included in email updates, and to reiterate the gratitude to\nMartin and Paul!",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720795589.556199",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "txl8J",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 8934] Irregularity in stem() display",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=8934"
                            },
                            {
                                "type": "text",
                                "text": "\n\nKelly Nicole Bodwin ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:kelly@bodwin.us",
                                "text": "kelly@bodwin.us"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |kelly@bodwin.us\n\n--- Comment #7 from Kelly Nicole Bodwin ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:kelly@bodwin.us",
                                "text": "kelly@bodwin.us"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCommenting to be included in email updates, and to reiterate the gratitude to\nMartin and Paul!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18763] New: No warning for omitted rows when the dimensions of an array exceed print.max*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18763>\n\n            Bug ID: 18763\n           Summary: No warning for omitted rows when the dimensions of an\n                    array exceed print.max\n           Product: R\n           Version: R 4.4.x\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: minor\n          Priority: P5\n         Component: I\/O\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:lore.abad6@gmail.com|lore.abad6@gmail.com>\n\nIn R 4.4.0 there should be a warning for omitted rows when the dimensions of an\narray exceed `print.max`\n\n```\nprint(array(dim= c(2, 2, 1)), max = 2)\n\n#&gt; , , 1\n#&gt;\n#&gt;      [,1] [,2]\n#&gt; [1,]   NA   NA\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720796444.196139",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "kFG",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18763] New: No warning for omitted rows when the dimensions of an array exceed print.max",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18763"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18763\n           Summary: No warning for omitted rows when the dimensions of an\n                    array exceed print.max\n           Product: R\n           Version: R 4.4.x\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: minor\n          Priority: P5\n         Component: I\/O\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:lore.abad6@gmail.com",
                                "text": "lore.abad6@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": "\n\nIn R 4.4.0 there should be a warning for omitted rows when the dimensions of an\narray exceed "
                            },
                            {
                                "type": "text",
                                "text": "print.max",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "print(array(dim= c(2, 2, 1)), max = 2)\n\n#> , , 1\n#>\n#>      [,1] [,2]\n#> [1,]   NA   NA\n"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18297] Use standard file-size units everywhere in base R (e.g., Mb -&gt; MiB)*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18297>\n\n--- Comment #2 from Henrik Bengtsson (<mailto:henrikb@braju.com|henrikb@braju.com>) ---\nCreated attachment 3375\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3375&amp;action=edit>\nReplaces size units in format strings with %s and a string constant\n\n(This patch was created in agreement in person with Martin Maechler on\n2024-07-12)\n\n# Background\n\nR uses home-made (\"legacy\") units for object and file sizes that, e.g.\n\n```\n&gt; x &lt;- double(1e12)\nError: cannot allocate vector of size 7450.6 Gb\n```\n\nNote that it uses 'Gb', which is actually Gigabits (=1000^3 bits).  It should\nreally be using 'GiB' per the official IEC standard, which are defined as KiB\n(1024 bytes), MiB (1024^2 bytes), GiB (1024^3 bytes), TiB (1024^4 bytes). FWIW,\nthere is also the SI standard [kB (1000 bytes), MB (1000^2 bytes), GB (1000^3\nbytes), TB (1000^4 bytes)], but we can leave that discussion for the future.\n\n\n\n# Strategy for migration\n\n* Some of the base R error that uses \"Gb\" etc. occur when we are low of memory,\nmeaning we have to be careful to not allocate additional memory when generating\nthe messages.\n\n* These messages are translatable, so we have to consider those too.\n\n* We want to make an update that is future-proof, i.e. we can reuse it later to\nswitch from \"legacy\" units (e.g. \"Gb\") to IEC (e.g. \"GiB\") or SI (e.g. \"GB\").\n\nBase on these objectives, we propose to bring out existing units in strings\n(\"Kb\", \"Mb\", \"Gb\", \"Tb\") out of the format strings and reintroduce them as a\n`%s` string constant. For example, we change:\n\n```\nerror(_(\"cannot allocate memory block of size %0.f Tb\"), size)\n```\n\nto\n\n```\nerror(_(\"cannot allocate memory block of size %0.f %s\"), size, \"Tb\")\n```\n\nThis will break existing translations, which has to be updated. On the other\nhand, there are several existing translations that have a Tb -&gt; Gb mistake,\ne.g.\n\n```\n$ grep -B 1 -A 1 -F \"cannot allocate memory block of size %0.f Tb\" --\nsrc\/library\/base\/po\/pt_BR.po\n#, fuzzy, c-format\nmsgid \"cannot allocate memory block of size %0.f Tb\"\nmsgstr \"no foi possvel alocar um bloco de memria de tamanho %0.1f Gb\"\n```\n\nThis patch will automatically avoid that mistake.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720797068.609949",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "LWK",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18297] Use standard file-size units everywhere in base R (e.g., Mb -> MiB)",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18297"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #2 from Henrik Bengtsson ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:henrikb@braju.com",
                                "text": "henrikb@braju.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCreated attachment 3375\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3375&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3375&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nReplaces size units in format strings with %s and a string constant\n\n(This patch was created in agreement in person with Martin Maechler on\n2024-07-12)\n\n# Background\n\nR uses home-made (\"legacy\") units for object and file sizes that, e.g.\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "> x <- double(1e12)\nError: cannot allocate vector of size 7450.6 Gb\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nNote that it uses 'Gb', which is actually Gigabits (=1000^3 bits).  It should\nreally be using 'GiB' per the official IEC standard, which are defined as KiB\n(1024 bytes), MiB (1024^2 bytes), GiB (1024^3 bytes), TiB (1024^4 bytes). FWIW,\nthere is also the SI standard [kB (1000 bytes), MB (1000^2 bytes), GB (1000^3\nbytes), TB (1000^4 bytes)], but we can leave that discussion for the future.\n\n\n\n\n\n# Strategy for migration\n\n* Some of the base R error that uses \"Gb\" etc. occur when we are low of memory,\nmeaning we have to be careful to not allocate additional memory when generating\nthe messages.\n\n* These messages are translatable, so we have to consider those too.\n\n* We want to make an update that is future-proof, i.e. we can reuse it later to\nswitch from \"legacy\" units (e.g. \"Gb\") to IEC (e.g. \"GiB\") or SI (e.g. \"GB\").\n\nBase on these objectives, we propose to bring out existing units in strings\n(\"Kb\", \"Mb\", \"Gb\", \"Tb\") out of the format strings and reintroduce them as a\n"
                            },
                            {
                                "type": "text",
                                "text": "%s",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " string constant. For example, we change:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "error(_(\"cannot allocate memory block of size %0.f Tb\"), size)\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nto\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "error(_(\"cannot allocate memory block of size %0.f %s\"), size, \"Tb\")\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nThis will break existing translations, which has to be updated. On the other\nhand, there are several existing translations that have a Tb -> Gb mistake,\ne.g.\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "$ grep -B 1 -A 1 -F \"cannot allocate memory block of size %0.f Tb\" --\nsrc\/library\/base\/po\/pt_BR.po\n#, fuzzy, c-format\nmsgid \"cannot allocate memory block of size %0.f Tb\"\nmsgstr \"no foi possvel alocar um bloco de memria de tamanho %0.1f Gb\"\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nThis patch will automatically avoid that mistake."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18297] Use standard file-size units everywhere in base R (e.g., Mb -&gt; MiB)*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18297>\n\nMichael Chirico (<mailto:michaelchirico4@gmail.com|michaelchirico4@gmail.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |michaelchirico4@gmail.com\n\n--- Comment #3 from Michael Chirico (<mailto:michaelchirico4@gmail.com|michaelchirico4@gmail.com>) ---\nFirm support of this proposal :)",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1720810291.595459",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "TQJ\/O",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18297] Use standard file-size units everywhere in base R (e.g., Mb -> MiB)",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18297"
                            },
                            {
                                "type": "text",
                                "text": "\n\nMichael Chirico ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:michaelchirico4@gmail.com",
                                "text": "michaelchirico4@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |michaelchirico4@gmail.com\n\n--- Comment #3 from Michael Chirico ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:michaelchirico4@gmail.com",
                                "text": "michaelchirico4@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nFirm support of this proposal :)"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]