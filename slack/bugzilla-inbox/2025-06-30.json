[
    {
        "subtype": "bot_message",
        "text": "*[Bug 18914] New: Add `zstd` to `extSoftVersion()`*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18914>\n\n            Bug ID: 18914\n           Summary: Add `zstd` to `extSoftVersion()`\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: minor\n          Priority: P5\n         Component: Misc\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:trevor.l.davis@gmail.com|trevor.l.davis@gmail.com>\n\nCreated attachment 3502\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3502&amp;action=edit>\nPatch to add `zstd` to `extSoftVersion()`\n\nCurrently `extSoftVersion()` does not report the version of `zstd` in use (if\nany) but it does report the version of all the other compression libraries R\nuses.  This omission seems like an oversight.\n\nI've included a patch so `extSoftVersion()` also reports the version of `zstd`\nin use (if any otherwise `\"\"`).\n\nIn particular, currently in order for a developer to tell if their version of R\nsupports `zstd` compression (i.e. `zstdfile()`) one must currently use code\nlike\n\n```\ntryCatch({zstdfile(\"\"); TRUE}, error = function(e) FALSE)\n```\n\nafter this patch is applied developers could also use code like\n\n```\nnzchar(extSoftVersion()[[\"zstd\"]])\n```\n\nNote [the documentation for\nzstd](<https:\/\/facebook.github.io\/zstd\/zstd_manual.html#Chapter2>) says that\n`ZSTD_versionString()` requires zstd 1.3.0+ but `include\/config.h.in` says that\n`HAVE_ZSTD` should only be defined if zstd &gt;= 1.3.3 so this function should\ntheoretically always be available if `HAVE_ZSTD` is defined.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1751343541.542189",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "N+LuM",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18914] New: Add ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "zstd",
                                "style": {
                                    "bold": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "extSoftVersion()",
                                "style": {
                                    "bold": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18914"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18914\n           Summary: Add "
                            },
                            {
                                "type": "text",
                                "text": "zstd",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to "
                            },
                            {
                                "type": "text",
                                "text": "extSoftVersion()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: minor\n          Priority: P5\n         Component: Misc\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:trevor.l.davis@gmail.com",
                                "text": "trevor.l.davis@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": "\n\nCreated attachment 3502\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3502&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3502&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nPatch to add "
                            },
                            {
                                "type": "text",
                                "text": "zstd",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to "
                            },
                            {
                                "type": "text",
                                "text": "extSoftVersion()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n\nCurrently "
                            },
                            {
                                "type": "text",
                                "text": "extSoftVersion()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " does not report the version of "
                            },
                            {
                                "type": "text",
                                "text": "zstd",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " in use (if\nany) but it does report the version of all the other compression libraries R\nuses.  This omission seems like an oversight.\n\nI've included a patch so "
                            },
                            {
                                "type": "text",
                                "text": "extSoftVersion()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " also reports the version of "
                            },
                            {
                                "type": "text",
                                "text": "zstd",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nin use (if any otherwise "
                            },
                            {
                                "type": "text",
                                "text": "\"\"",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ").\n\nIn particular, currently in order for a developer to tell if their version of R\nsupports "
                            },
                            {
                                "type": "text",
                                "text": "zstd",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " compression (i.e. "
                            },
                            {
                                "type": "text",
                                "text": "zstdfile()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ") one must currently use code\nlike\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "tryCatch({zstdfile(\"\"); TRUE}, error = function(e) FALSE)\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nafter this patch is applied developers could also use code like\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "nzchar(extSoftVersion()[[\"zstd\"]])\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nNote [the documentation for\nzstd]("
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/facebook.github.io\/zstd\/zstd_manual.html#Chapter2"
                            },
                            {
                                "type": "text",
                                "text": ") says that\n"
                            },
                            {
                                "type": "text",
                                "text": "ZSTD_versionString()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " requires zstd 1.3.0+ but "
                            },
                            {
                                "type": "text",
                                "text": "include\/config.h.in",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " says that\n"
                            },
                            {
                                "type": "text",
                                "text": "HAVE_ZSTD",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " should only be defined if zstd >= 1.3.3 so this function should\ntheoretically always be available if "
                            },
                            {
                                "type": "text",
                                "text": "HAVE_ZSTD",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is defined."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]