[
    {
        "subtype": "bot_message",
        "text": "*[Bug 18919] [&lt;-.POSIXlt and [[&lt;-.POSIXlt do not reconcile time zones of 'x', 'value' before subassignment*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18919>\n\n--- Comment #6 from Suharto Anggono (<mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>) ---\n(In reply to Mikael Jagan from comment #0)\nI don't quite agree. What defines a `POSIXlt` object is its date\/time parts\n(components). Time zone is a \"decoration\". So, I think it is correct that\n\n    x1[1L] &lt;- y\n\nupdates date\/time parts of `x1` to be of `y`. Time difference is not quite\nrelevant because taking difference interprets the arguments as point in time\n(instant), a `POSIXct` concept.\n\nAlso, I think, what is done by subassignment to `POSIXlt` should be consistent\nwith what is done by `as.POSIXlt`. `as.POSIXlt` alone should be sufficient, not\n`as.POSIXlt(as.POSIXct(.))`.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1753274089.336139",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "neBZ",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18919] [<-.POSIXlt and [[<-.POSIXlt do not reconcile time zones of 'x', 'value' before subassignment",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18919"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #6 from Suharto Anggono ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\n(In reply to Mikael Jagan from comment #0)\nI don't quite agree. What defines a "
                            },
                            {
                                "type": "text",
                                "text": "POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " object is its date\/time parts\n(components). Time zone is a \"decoration\". So, I think it is correct that\n\n    x1[1L] <- y\n\nupdates date\/time parts of "
                            },
                            {
                                "type": "text",
                                "text": "x1",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to be of "
                            },
                            {
                                "type": "text",
                                "text": "y",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". Time difference is not quite\nrelevant because taking difference interprets the arguments as point in time\n(instant), a "
                            },
                            {
                                "type": "text",
                                "text": "POSIXct",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " concept.\n\nAlso, I think, what is done by subassignment to "
                            },
                            {
                                "type": "text",
                                "text": "POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " should be consistent\nwith what is done by "
                            },
                            {
                                "type": "text",
                                "text": "as.POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". "
                            },
                            {
                                "type": "text",
                                "text": "as.POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " alone should be sufficient, not\n"
                            },
                            {
                                "type": "text",
                                "text": "as.POSIXlt(as.POSIXct(.))",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18919] [&lt;-.POSIXlt and [[&lt;-.POSIXlt do not reconcile time zones of 'x', 'value' before subassignment*\nhttps:\/\/bugs.r-project.org\/show_bug.cgi?id=18919\n\n--- Comment #7 from Mikael Jagan (jaganmn@mcmaster.ca) ---\n(In reply to Suharto Anggono from comment #6)\n&gt; I don't quite agree. What defines a `POSIXlt` object is its date\/time parts\n&gt; (components). Time zone is a \"decoration\". So, I think it is correct that\n&gt; \n&gt;     x1[1L] &lt;- y\n&gt; \n&gt; updates date\/time parts of `x1` to be of `y`. Time difference is not quite\n&gt; relevant because taking difference interprets the arguments as point in time\n&gt; (instant), a `POSIXct` concept.\n\nMy understanding from code- and documentation-reading is that `POSIXct` and\n`POSIXlt` are date-time representations with identical semantics (objects are\nvectors of unambiguous date-times, modulo platform dependent aspects) and\ndifferent ranges (`POSIXlt` admits greater precision).  The claim that they\nshould have different semantics, too, seems wrong to me.\n\nIn any case, `POSIXlt` has components `isdst`, `zone`, and `gmtoff` and IIUC it\nis intended that these remain consistent with any `tzone` attribute.  That the\n`tzone` attribute is \"decoration\" (not affecting the represented date-time) is\nclearly documented for `POSIXct`, but the situation is not so clear for\n`POSIXlt`.\n\nIt's certainly complicated, so I'm happy for correction or clarification here.\n\n&gt; Also, I think, what is done by subassignment to `POSIXlt` should be\n&gt; consistent with what is done by `as.POSIXlt`. `as.POSIXlt` alone should be\n&gt; sufficient, not `as.POSIXlt(as.POSIXct(.))`.\n\n`body(as.POSIXlt.default)` has\n\n```\n    if (inherits(x, \"POSIXlt\")) \n        return(if (missing(tz)) x else .POSIXlt(x, tz))\n```\n\nwhich shows that `as.POSIXlt(x=&lt;POSIXlt&gt;, tz=)` changes the `tzone` attribute\nwithout adjusting any of the list components.  The intermediate coercion to\n`POSIXct` arranges for a full adjustment.  `c.POSIXlt` behaves similarly.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1753287305.735559",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "YgGY",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18919] [<-.POSIXlt and [[<-.POSIXlt do not reconcile time zones of 'x', 'value' before subassignment",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nhttps:\/\/bugs.r-project.org\/show_bug.cgi?id=18919\n\n--- Comment #7 from Mikael Jagan (jaganmn@mcmaster.ca) ---\n(In reply to Suharto Anggono from comment #6)"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": "I don't quite agree. What defines a "
                            },
                            {
                                "type": "text",
                                "text": "POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " object is its date\/time parts\n(components). Time zone is a \"decoration\". So, I think it is correct that\n\n    x1[1L] <- y\n\nupdates date\/time parts of "
                            },
                            {
                                "type": "text",
                                "text": "x1",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to be of "
                            },
                            {
                                "type": "text",
                                "text": "y",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". Time difference is not quite\nrelevant because taking difference interprets the arguments as point in time\n(instant), a "
                            },
                            {
                                "type": "text",
                                "text": "POSIXct",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " concept."
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nMy understanding from code- and documentation-reading is that "
                            },
                            {
                                "type": "text",
                                "text": "POSIXct",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and\n"
                            },
                            {
                                "type": "text",
                                "text": "POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " are date-time representations with identical semantics (objects are\nvectors of unambiguous date-times, modulo platform dependent aspects) and\ndifferent ranges ("
                            },
                            {
                                "type": "text",
                                "text": "POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " admits greater precision).  The claim that they\nshould have different semantics, too, seems wrong to me.\n\nIn any case, "
                            },
                            {
                                "type": "text",
                                "text": "POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " has components "
                            },
                            {
                                "type": "text",
                                "text": "isdst",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", "
                            },
                            {
                                "type": "text",
                                "text": "zone",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", and "
                            },
                            {
                                "type": "text",
                                "text": "gmtoff",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and IIUC it\nis intended that these remain consistent with any "
                            },
                            {
                                "type": "text",
                                "text": "tzone",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " attribute.  That the\n"
                            },
                            {
                                "type": "text",
                                "text": "tzone",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " attribute is \"decoration\" (not affecting the represented date-time) is\nclearly documented for "
                            },
                            {
                                "type": "text",
                                "text": "POSIXct",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", but the situation is not so clear for\n"
                            },
                            {
                                "type": "text",
                                "text": "POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ".\n\nIt's certainly complicated, so I'm happy for correction or clarification here.\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Also, I think, what is done by subassignment to "
                            },
                            {
                                "type": "text",
                                "text": "POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " should be\nconsistent with what is done by "
                            },
                            {
                                "type": "text",
                                "text": "as.POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ". "
                            },
                            {
                                "type": "text",
                                "text": "as.POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " alone should be\nsufficient, not "
                            },
                            {
                                "type": "text",
                                "text": "as.POSIXlt(as.POSIXct(.))",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "."
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\n"
                            },
                            {
                                "type": "text",
                                "text": "body(as.POSIXlt.default)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " has\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "    if (inherits(x, \"POSIXlt\")) \n        return(if (missing(tz)) x else .POSIXlt(x, tz))\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nwhich shows that "
                            },
                            {
                                "type": "text",
                                "text": "as.POSIXlt(x=<POSIXlt>, tz=)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " changes the "
                            },
                            {
                                "type": "text",
                                "text": "tzone",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " attribute\nwithout adjusting any of the list components.  The intermediate coercion to\n"
                            },
                            {
                                "type": "text",
                                "text": "POSIXct",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " arranges for a full adjustment.  "
                            },
                            {
                                "type": "text",
                                "text": "c.POSIXlt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " behaves similarly."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]