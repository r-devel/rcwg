[
    {
        "subtype": "bot_message",
        "text": "*[Bug 18922] New: Documentation of how to use setMethod in tests is lacking*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18922>\n\n            Bug ID: 18922\n           Summary: Documentation of how to use setMethod in tests is\n                    lacking\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Documentation\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:michaelchirico4@gmail.com|michaelchirico4@gmail.com>\n\nSometimes, in unit tests, it is nice to register some temporary S4 methods and\nthereby keep the test more hermetic (not depending on the lifecycle of S4\nmethods in any other package).\n\nIt seems natural to do something like: `setMethod(...); test_code(...);\nremoveMethod(...)`.\n\nBut today, `removeMethod()` is not mentioned at all in `?setMethod`, and\n`?removeMethod` looks like a scary admonition that you're eating the apple in\nEden.\n\nHaving a well-lit path for using `setMethod()` in tests is appropriate, IMO,\nbut maybe I'm missing something about what that endorsed approach is. Maybe we\nare recommending such tests be run in a sub-process instead?\n\nAs of today I only see a handful of CRAN packages using this:\n\n<https:\/\/github.com\/search?q=org%3Acran%20path%3Atests%20%2FremoveMethod%5C(%2F&amp;type=code>",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1753374451.141999",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "jhgLc",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18922] New: Documentation of how to use setMethod in tests is lacking",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18922"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18922\n           Summary: Documentation of how to use setMethod in tests is\n                    lacking\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Documentation\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:michaelchirico4@gmail.com",
                                "text": "michaelchirico4@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": "\n\nSometimes, in unit tests, it is nice to register some temporary S4 methods and\nthereby keep the test more hermetic (not depending on the lifecycle of S4\nmethods in any other package).\n\nIt seems natural to do something like: `setMethod(...); test_code(...);\nremoveMethod(...)`.\n\nBut today, "
                            },
                            {
                                "type": "text",
                                "text": "removeMethod()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is not mentioned at all in "
                            },
                            {
                                "type": "text",
                                "text": "?setMethod",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", and\n"
                            },
                            {
                                "type": "text",
                                "text": "?removeMethod",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " looks like a scary admonition that you're eating the apple in\nEden.\n\nHaving a well-lit path for using "
                            },
                            {
                                "type": "text",
                                "text": "setMethod()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " in tests is appropriate, IMO,\nbut maybe I'm missing something about what that endorsed approach is. Maybe we\nare recommending such tests be run in a sub-process instead?\n\nAs of today I only see a handful of CRAN packages using this:\n\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/search?q=org%3Acran%20path%3Atests%20%2FremoveMethod%5C(%2F&amp;type=code",
                                "text": "https:\/\/github.com\/search?q=org%3Acran%20path%3Atests%20%2FremoveMethod%5C(%2F&type=code"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18923] New: Unstable behaviour of density() with small bandwidths*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18923>\n\n            Bug ID: 18923\n           Summary: Unstable behaviour of density() with small bandwidths\n           Product: R\n           Version: R 4.5.x\n          Hardware: x86_64\/x64\/amd64 (64-bit)\n                OS: Windows 64-bit\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Models\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:martin.hazelton@otago.ac.nz|martin.hazelton@otago.ac.nz>\n\nThe function stats::density() gives incorrect results for small bandwidths. The\nproblem worsens when the ratio of bandwidth to step-size in evaluation grid\nbecomes smaller. The problem is not confined to a single kernel. \n\nIllustrative examples:\n\n````\nset.seed(2025)\nn &lt;- 10^7\nx &lt;- rnorm(n)\nh &lt;- 0.001\npar(mfrow=c(2,2))\nfor (i in c(1,2,4,8)){\nn.eval &lt;- i*512\nfhat &lt;- density(x,bw=h,n=n.eval)\nplot(fhat)\ncurve(dnorm,-4,4,add=T,col=2)\n}\n\nfor (i in c(1,2,4,8)){\nn.eval &lt;- i*512\nfhat &lt;- density(x,bw=h,n=n.eval,kernel=\"e\")\nplot(fhat)\ncurve(dnorm,-4,4,add=T,col=2)\n}\n\nfor (i in c(1,2,4,8)){\nn.eval &lt;- i*512\nfhat &lt;- density(x,bw=h,n=n.eval,kernel=\"r\")\nplot(fhat)\ncurve(dnorm,-4,4,add=T,col=2)\n}\n````\nNote the scales on the y-axes: the total probability mass of the kernel\nestimates is (much) larger than one for estimates using the coarser evaluation\ngrids.\n\nIn these examples the bandwidth applied is too small from a theoretical\nperspective. Back of the envelope calculations suggest that the estimate should\nappear like the true normal density on which high frequency noise of around 1%.\nA very fine resolution grid gives what looks right to me:\n\n````\nfhat &lt;- density(x,bw=h,n=512^2)\nplot(fhat)\ncurve(dnorm,-4,4,add=T,col=2)\n````\n\nI guess the problem is with FFT computation of convolutions. There may be\nconnections with bug 18337.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1753392400.516739",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "C0Dg",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18923] New: Unstable behaviour of density() with small bandwidths",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18923"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18923\n           Summary: Unstable behaviour of density() with small bandwidths\n           Product: R\n           Version: R 4.5.x\n          Hardware: x86_64\/x64\/amd64 (64-bit)\n                OS: Windows 64-bit\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Models\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:martin.hazelton@otago.ac.nz",
                                "text": "martin.hazelton@otago.ac.nz",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n\nThe function stats::density() gives incorrect results for small bandwidths. The\nproblem worsens when the ratio of bandwidth to step-size in evaluation grid\nbecomes smaller. The problem is not confined to a single kernel. \n\nIllustrative examples:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "`\nset.seed(2025)\nn <- 10^7\nx <- rnorm(n)\nh <- 0.001\npar(mfrow=c(2,2))\nfor (i in c(1,2,4,8)){\nn.eval <- i*512\nfhat <- density(x,bw=h,n=n.eval)\nplot(fhat)\ncurve(dnorm,-4,4,add=T,col=2)\n}\n\nfor (i in c(1,2,4,8)){\nn.eval <- i*512\nfhat <- density(x,bw=h,n=n.eval,kernel=\"e\")\nplot(fhat)\ncurve(dnorm,-4,4,add=T,col=2)\n}\n\nfor (i in c(1,2,4,8)){\nn.eval <- i*512\nfhat <- density(x,bw=h,n=n.eval,kernel=\"r\")\nplot(fhat)\ncurve(dnorm,-4,4,add=T,col=2)\n}\n`"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Note the scales on the y-axes: the total probability mass of the kernel\nestimates is (much) larger than one for estimates using the coarser evaluation\ngrids.\n\nIn these examples the bandwidth applied is too small from a theoretical\nperspective. Back of the envelope calculations suggest that the estimate should\nappear like the true normal density on which high frequency noise of around 1%.\nA very fine resolution grid gives what looks right to me:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "`\nfhat <- density(x,bw=h,n=512^2)\nplot(fhat)\ncurve(dnorm,-4,4,add=T,col=2)\n`"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nI guess the problem is with FFT computation of convolutions. There may be\nconnections with bug 18337."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]