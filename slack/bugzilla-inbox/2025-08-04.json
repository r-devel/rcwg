[
    {
        "subtype": "bot_message",
        "text": "*[Bug 18319] Renaming prebuilt package file breaks installation on Windows.*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18319>\n\nTomas Kalibera (<mailto:tomas.kalibera@gmail.com|tomas.kalibera@gmail.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|UNCONFIRMED                 |CLOSED\n         Resolution|---                         |FIXED\n                 CC|                            |tomas.kalibera@gmail.com\n\n--- Comment #1 from Tomas Kalibera (<mailto:tomas.kalibera@gmail.com|tomas.kalibera@gmail.com>) ---\nI've modified R-devel to allow installing binary packages on Windows from\narchives with a custom name, using R CMD INSTALL. I wouldn't use the feature\nmyself, I think it could lead to confusion both of users and of other tools,\npossibly even other parts of R. But, it works using R CMD INSTALL now also on\nWindows (where a different code-path is taken from Unix, hence the difference\nfrom macOS).",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1754321307.491279",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "SOJfr",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18319] Renaming prebuilt package file breaks installation on Windows.",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18319"
                            },
                            {
                                "type": "text",
                                "text": "\n\nTomas Kalibera ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:tomas.kalibera@gmail.com",
                                "text": "tomas.kalibera@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|UNCONFIRMED                 |CLOSED\n         Resolution|---                         |FIXED\n                 CC|                            |tomas.kalibera@gmail.com\n\n--- Comment #1 from Tomas Kalibera ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:tomas.kalibera@gmail.com",
                                "text": "tomas.kalibera@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nI've modified R-devel to allow installing binary packages on Windows from\narchives with a custom name, using R CMD INSTALL. I wouldn't use the feature\nmyself, I think it could lead to confusion both of users and of other tools,\npossibly even other parts of R. But, it works using R CMD INSTALL now also on\nWindows (where a different code-path is taken from Unix, hence the difference\nfrom macOS)."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18466] loadNamespace(\"pkg\") isn't counted as a use of \"pkg\"*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18466>\n\nTomas Kalibera (<mailto:tomas.kalibera@gmail.com|tomas.kalibera@gmail.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|UNCONFIRMED                 |CLOSED\n                 CC|                            |tomas.kalibera@gmail.com\n         Resolution|---                         |FIXED\n\n--- Comment #2 from Tomas Kalibera (<mailto:tomas.kalibera@gmail.com|tomas.kalibera@gmail.com>) ---\nThanks, now in R-devel.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1754321761.447939",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "swh7",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18466] loadNamespace(\"pkg\") isn't counted as a use of \"pkg\"",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18466"
                            },
                            {
                                "type": "text",
                                "text": "\n\nTomas Kalibera ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:tomas.kalibera@gmail.com",
                                "text": "tomas.kalibera@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|UNCONFIRMED                 |CLOSED\n                 CC|                            |tomas.kalibera@gmail.com\n         Resolution|---                         |FIXED\n\n--- Comment #2 from Tomas Kalibera ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:tomas.kalibera@gmail.com",
                                "text": "tomas.kalibera@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nThanks, now in R-devel."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18408] Using CMake section \"$(SHLIB): mylibs\" did not work for me*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18408>\n\nTomas Kalibera (<mailto:tomas.kalibera@gmail.com|tomas.kalibera@gmail.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |tomas.kalibera@gmail.com\n         Resolution|---                         |INVALID\n             Status|UNCONFIRMED                 |CLOSED\n\n--- Comment #1 from Tomas Kalibera (<mailto:tomas.kalibera@gmail.com|tomas.kalibera@gmail.com>) ---\nFor similar problems, I'd recommend first asking for help on the R-pkg-devel\nmailing list, where other package authors who are already using cmake could\nhelp, so you would get a response much much sooner. You could also take\ninspiration from another package. Only if that confirmed your suspicion it is a\nbug in R (or R documentation), I would recommend filing a bug report here. And\nsuch a report would have to include also relevant parts of the outputs you got\nand explanations why you think it is a problem in R (or R documentation).\n\nFrom analyzing this case, I am not persuaded there is a problem in R or in the\ndocumentation. See below for details.\n\nOn Windows, Rtools include cmake that has Unix Makefiles as the default\ngenerator (the cmake source code is patched for this). So you don't have to\nspecify the generator, and perhaps it is cleaner not to do that, but doing it\nshouldn't matter.\n\nOne should primarily use Makevars (not Makefile, as per recommendation in\nWriting R Extensions). The example package with Makevars and with the form\nrecommended in WRE ($(SHLIB): mylibs) worked for me on Unix - I couldn't\nreproduce your problem there.\n\nSpecifying only target as proposed in this report\n\nall: mylibs $(SHLIB)\n\nis not correct, because make could try building $(SHLIB) before mylibs. If one\nwanted to specify \"all:\" as target (though it seems it is not necessary) as\nabove, one would need to also declare a dependency:\n\n$(SHLIB): mylibs\n\nMoreover, the example package included\n\nall: libhighs.a $(SHLIB) cleanup\n\nwhich is not ideal for the same reason: make could try running cleanup before\nsome of the other targets. Note there is also parallel make, both targets could\nrun in parallel. WRE warns against this. Also, one should mark phony targets\n(those not generating files) as such to make (more in WRE).\n\nNow, when I tried the example package on Windows, with the form recommended by\nWRE ($(SHLIB): mylibs), it failed, because make decided first to compile ex.o,\nbefore building the foo library using cmake. However, ex.cpp depends on foo.h,\nwhich it looks for in directory \"include\", which will only get populated when\nbuilding the foo library. So, in the language of the example shown here,\n\"mylibs\" target as a side effect installs a header for compilation of other\nsource files needed for SHLIB. This is a problem in the Makevars file and can\nbe fixed on my system by specifying this dependency:\n\nex.o: libhighs.a\n\nIn principle, however, my preference would have been using files in targets\nhere in preference of phony targets.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1754326820.374409",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "WKde",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18408] Using CMake section \"$(SHLIB): mylibs\" did not work for me",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18408"
                            },
                            {
                                "type": "text",
                                "text": "\n\nTomas Kalibera ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:tomas.kalibera@gmail.com",
                                "text": "tomas.kalibera@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |tomas.kalibera@gmail.com\n         Resolution|---                         |INVALID\n             Status|UNCONFIRMED                 |CLOSED\n\n--- Comment #1 from Tomas Kalibera ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:tomas.kalibera@gmail.com",
                                "text": "tomas.kalibera@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nFor similar problems, I'd recommend first asking for help on the R-pkg-devel\nmailing list, where other package authors who are already using cmake could\nhelp, so you would get a response much much sooner. You could also take\ninspiration from another package. Only if that confirmed your suspicion it is a\nbug in R (or R documentation), I would recommend filing a bug report here. And\nsuch a report would have to include also relevant parts of the outputs you got\nand explanations why you think it is a problem in R (or R documentation).\n\nFrom analyzing this case, I am not persuaded there is a problem in R or in the\ndocumentation. See below for details.\n\nOn Windows, Rtools include cmake that has Unix Makefiles as the default\ngenerator (the cmake source code is patched for this). So you don't have to\nspecify the generator, and perhaps it is cleaner not to do that, but doing it\nshouldn't matter.\n\nOne should primarily use Makevars (not Makefile, as per recommendation in\nWriting R Extensions). The example package with Makevars and with the form\nrecommended in WRE ($(SHLIB): mylibs) worked for me on Unix - I couldn't\nreproduce your problem there.\n\nSpecifying only target as proposed in this report\n\nall: mylibs $(SHLIB)\n\nis not correct, because make could try building $(SHLIB) before mylibs. If one\nwanted to specify \"all:\" as target (though it seems it is not necessary) as\nabove, one would need to also declare a dependency:\n\n$(SHLIB): mylibs\n\nMoreover, the example package included\n\nall: libhighs.a $(SHLIB) cleanup\n\nwhich is not ideal for the same reason: make could try running cleanup before\nsome of the other targets. Note there is also parallel make, both targets could\nrun in parallel. WRE warns against this. Also, one should mark phony targets\n(those not generating files) as such to make (more in WRE).\n\nNow, when I tried the example package on Windows, with the form recommended by\nWRE ($(SHLIB): mylibs), it failed, because make decided first to compile ex.o,\nbefore building the foo library using cmake. However, ex.cpp depends on foo.h,\nwhich it looks for in directory \"include\", which will only get populated when\nbuilding the foo library. So, in the language of the example shown here,\n\"mylibs\" target as a side effect installs a header for compilation of other\nsource files needed for SHLIB. This is a problem in the Makevars file and can\nbe fixed on my system by specifying this dependency:\n\nex.o: libhighs.a\n\nIn principle, however, my preference would have been using files in targets\nhere in preference of phony targets."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18319] Renaming prebuilt package file breaks installation on Windows.*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18319>\n\n--- Comment #2 from Justin (<mailto:mcgrath.justin@gmail.com|mcgrath.justin@gmail.com>) ---\nThanks for addressing it.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1754331825.139439",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "HOs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18319] Renaming prebuilt package file breaks installation on Windows.",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18319"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #2 from Justin ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:mcgrath.justin@gmail.com",
                                "text": "mcgrath.justin@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nThanks for addressing it."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]