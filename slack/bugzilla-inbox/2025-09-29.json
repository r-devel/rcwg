[
    {
        "subtype": "bot_message",
        "text": "*[Bug 18951] New: `interaction()` produces NA by integer overflow with large factors*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18951>\n\n            Bug ID: 18951\n           Summary: `interaction()` produces NA by integer overflow with\n                    large factors\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Accuracy\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:Thomas.SOEIRO@ap-hm.fr|Thomas.SOEIRO@ap-hm.fr>\n\n`interaction()` produces NA by integer overflow with large factors:\n\n```\nn &lt;- 5e4\nk &lt;- 5\nf1 &lt;- gl(n, k)\nf2 &lt;- gl(n * 2, k \/ 2)\n\nz &lt;- interaction(f1, f2, drop = TRUE)\n# Warning message:\n# In ay * nx : NAs produced by integer overflow\n\nsum(<http:\/\/is.na|is.na>(z))\n# [1] 114100\n```\n\nThis is a follow-up of a (closed) bug regarding `interaction()` in `ave()`\n(<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18223>):\n\n```\nset.seed(20250218)\nx &lt;- runif(n * k)\n\nz &lt;- ave(x, f1, f2, FUN = identity)\n# Warning message:\n# In ay * nx : NAs produced by integer overflow\n\n# no issue despite the warning?\nidentical(x, z)\n# [1] TRUE\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1759139944.706159",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rft",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18951] New: ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "interaction()",
                                "style": {
                                    "bold": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " produces NA by integer overflow with large factors",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18951"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18951\n           Summary: "
                            },
                            {
                                "type": "text",
                                "text": "interaction()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " produces NA by integer overflow with\n                    large factors\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Accuracy\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:Thomas.SOEIRO@ap-hm.fr",
                                "text": "Thomas.SOEIRO@ap-hm.fr",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n\n"
                            },
                            {
                                "type": "text",
                                "text": "interaction()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " produces NA by integer overflow with large factors:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "n <- 5e4\nk <- 5\nf1 <- gl(n, k)\nf2 <- gl(n * 2, k \/ 2)\n\nz <- interaction(f1, f2, drop = TRUE)\n# Warning message:\n# In ay * nx : NAs produced by integer overflow\n\nsum("
                            },
                            {
                                "type": "link",
                                "url": "http:\/\/is.na",
                                "text": "is.na"
                            },
                            {
                                "type": "text",
                                "text": "(z))\n# [1] 114100\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nThis is a follow-up of a (closed) bug regarding "
                            },
                            {
                                "type": "text",
                                "text": "interaction()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " in "
                            },
                            {
                                "type": "text",
                                "text": "ave()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n("
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18223"
                            },
                            {
                                "type": "text",
                                "text": "):\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "set.seed(20250218)\nx <- runif(n * k)\n\nz <- ave(x, f1, f2, FUN = identity)\n# Warning message:\n# In ay * nx : NAs produced by integer overflow\n\n# no issue despite the warning?\nidentical(x, z)\n# [1] TRUE\n"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]