[
    {
        "subtype": "bot_message",
        "text": "*[Bug 18955] cairo library update 1.16 -&gt; 1.18 seems to break font embedding into PDF (R 4.3 -&gt; 4.4 transition)*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18955>\n\n--- Comment #10 from Kristian Vlahovicek (<mailto:kristian@bioinfo.hr|kristian@bioinfo.hr>) ---\nHi Paul, I very much appreciate you taking the time to look into this!\nActually, I think this is neither good nor bad but indeed excellent - we are\nmaking progress :)\n\nI quickly tested a couple of fonts now and what seems to come up as a pattern\nis that:\n\n- **R 4.5.1 (Win)** embeds TrueType fonts properly, while OpenType fonts fail\nto embed (Tested With Fira Condensed and Ubuntu OpenType vs. Technic and\nAlgerian TrueType)\n\n- **R 4.3.3 (Win)** has no issue with embedding all of the above fonts, both OT\nand TT work out of the box.\n\nThe *bad\/improperly installed font* hypothesis would not explain the\nobservation that reverting to R4.3 restores embedding, would I be right to\nconclude this? Can you try it on your end just by installing the R4.3.3 and\nretrying?\n\nWhich kind of leads me to suspect that the way the installed fonts are\n**presented to\/located by** cairo might have changed somehow, would you agree? \n\nThanks again!",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1760698257.384229",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "O7zp",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18955] cairo library update 1.16 -> 1.18 seems to break font embedding into PDF (R 4.3 -> 4.4 transition)",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18955"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #10 from Kristian Vlahovicek ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:kristian@bioinfo.hr",
                                "text": "kristian@bioinfo.hr"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nHi Paul, I very much appreciate you taking the time to look into this!\nActually, I think this is neither good nor bad but indeed excellent - we are\nmaking progress :)\n\nI quickly tested a couple of fonts now and what seems to come up as a pattern\nis that:\n\n- **R 4.5.1 (Win)** embeds TrueType fonts properly, while OpenType fonts fail\nto embed (Tested With Fira Condensed and Ubuntu OpenType vs. Technic and\nAlgerian TrueType)\n\n- **R 4.3.3 (Win)** has no issue with embedding all of the above fonts, both OT\nand TT work out of the box.\n\nThe "
                            },
                            {
                                "type": "text",
                                "text": "bad\/improperly installed font",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " hypothesis would not explain the\nobservation that reverting to R4.3 restores embedding, would I be right to\nconclude this? Can you try it on your end just by installing the R4.3.3 and\nretrying?\n\nWhich kind of leads me to suspect that the way the installed fonts are\n**presented to\/located by** cairo might have changed somehow, would you agree? \n\nThanks again!"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18955] cairo library update 1.16 -&gt; 1.18 seems to break font embedding into PDF (R 4.3 -&gt; 4.4 transition)*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18955>\n\nSimon Urbanek (<mailto:simon.urbanek@r-project.org|simon.urbanek@r-project.org>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |simon.urbanek@r-project.org\n\n--- Comment #11 from Simon Urbanek (<mailto:simon.urbanek@r-project.org|simon.urbanek@r-project.org>) ---\nI would involve Tomas Kalibera in this discussion since it looks like it is\nrelated to Windows toolchain changes so he is the expert there.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1760705520.095649",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Gco",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18955] cairo library update 1.16 -> 1.18 seems to break font embedding into PDF (R 4.3 -> 4.4 transition)",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18955"
                            },
                            {
                                "type": "text",
                                "text": "\n\nSimon Urbanek ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:simon.urbanek@r-project.org",
                                "text": "simon.urbanek@r-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |simon.urbanek@r-project.org\n\n--- Comment #11 from Simon Urbanek ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:simon.urbanek@r-project.org",
                                "text": "simon.urbanek@r-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nI would involve Tomas Kalibera in this discussion since it looks like it is\nrelated to Windows toolchain changes so he is the expert there."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18955] cairo library update 1.16 -&gt; 1.18 seems to break font embedding into PDF (R 4.3 -&gt; 4.4 transition)*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18955>\n\nTomas Kalibera (<mailto:tomas.kalibera@gmail.com|tomas.kalibera@gmail.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |tomas.kalibera@gmail.com\n\n--- Comment #12 from Tomas Kalibera (<mailto:tomas.kalibera@gmail.com|tomas.kalibera@gmail.com>) ---\nCould we create a smaller reproducible example, using only base R? That could\nmake the debugging simpler.\n\nRe installing and finding fonts on Windows, this is done by the OS. One can\nsimply double-click on a .ttf file in Windows explorer, say on\nUbuntuCondensed-Regular.ttf (as in the above example, can be downloaded in a\n.zip file from <https:\/\/fonts.google.com\/specimen\/Ubuntu+Condensed>), and then\nchoose \"Install\". Normally it would get installed into a user font directory\n(\\Users\\username\\AppData\\Local\\Microsoft\\Windows. One can then delete the font\nby going to Windows Settings, Personalization, Fonts, finding that font,\nclicking to uninstall (one shouldn't delete manually, that would confuse\nWindows).\n\nWith the font installed, one can use it as follows:\n\nwindowsFonts(UC = \"Ubuntu Condensed\")\nplot.new()\ntext(0.5,0.5, \"Ubuntu\", family=\"UC\", cex=10)\n\nThe example uses a large font so that one can visually confirm it is the new\nfont.\n\nWould it be possible to expand this example to use cairo and produce a PDF, to\nreproduce the problem? (but using only base R)\n\nOtherwise, I am not able to guess what the cause is. The only thing possibly\nrelated I can think of (but I am not knowledgeable of cairo), R on Windows (as\nwell as Cairo package) doesn't use fontconfig with cairo, even though cairo (in\nRtools) is built with fontconfig support; it worked with 1.16, but maybe\nsomething changed. With a smaller reproducible example, it should be simple\nenough to debug, say via Process Monitor, what is happening.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1760724664.862109",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Ax1XM",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18955] cairo library update 1.16 -> 1.18 seems to break font embedding into PDF (R 4.3 -> 4.4 transition)",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18955"
                            },
                            {
                                "type": "text",
                                "text": "\n\nTomas Kalibera ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:tomas.kalibera@gmail.com",
                                "text": "tomas.kalibera@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |tomas.kalibera@gmail.com\n\n--- Comment #12 from Tomas Kalibera ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:tomas.kalibera@gmail.com",
                                "text": "tomas.kalibera@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCould we create a smaller reproducible example, using only base R? That could\nmake the debugging simpler.\n\nRe installing and finding fonts on Windows, this is done by the OS. One can\nsimply double-click on a .ttf file in Windows explorer, say on\nUbuntuCondensed-Regular.ttf (as in the above example, can be downloaded in a\n.zip file from "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/fonts.google.com\/specimen\/Ubuntu+Condensed"
                            },
                            {
                                "type": "text",
                                "text": "), and then\nchoose \"Install\". Normally it would get installed into a user font directory\n(\\Users\\username\\AppData\\Local\\Microsoft\\Windows. One can then delete the font\nby going to Windows Settings, Personalization, Fonts, finding that font,\nclicking to uninstall (one shouldn't delete manually, that would confuse\nWindows).\n\nWith the font installed, one can use it as follows:\n\nwindowsFonts(UC = \"Ubuntu Condensed\")\nplot.new()\ntext(0.5,0.5, \"Ubuntu\", family=\"UC\", cex=10)\n\nThe example uses a large font so that one can visually confirm it is the new\nfont.\n\nWould it be possible to expand this example to use cairo and produce a PDF, to\nreproduce the problem? (but using only base R)\n\nOtherwise, I am not able to guess what the cause is. The only thing possibly\nrelated I can think of (but I am not knowledgeable of cairo), R on Windows (as\nwell as Cairo package) doesn't use fontconfig with cairo, even though cairo (in\nRtools) is built with fontconfig support; it worked with 1.16, but maybe\nsomething changed. With a smaller reproducible example, it should be simple\nenough to debug, say via Process Monitor, what is happening."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]