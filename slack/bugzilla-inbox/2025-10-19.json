[
    {
        "subtype": "bot_message",
        "text": "*[Bug 18960] New: tools::undoc(dir=) errors unless dir=\".\" in the presence of Rd with \\packageDescription macro*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18960>\n\n            Bug ID: 18960\n           Summary: tools::undoc(dir=) errors unless dir=\".\" in the\n                    presence of Rd with \\packageDescription macro\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Misc\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:michaelchirico4@gmail.com|michaelchirico4@gmail.com>\n\nReprex:\n\n```\ndescPkg\n├── DESCRIPTION\n├── man\n│   └── descPkg-package.Rd\n└── R\n    └── foo.R\n\n3 directories, 3 files\n```\n\nContents:\n\n```\n# DESCRIPTION\nTitle: descPkg\nPackage: descPkg\nDescription: a package using \\packageDescription\n```\n\n```\n% man\/descPkg-package.Rd\n\\name{descPkg-package}\n\\alias{descPkg-package}\n\\alias{descPkg}\n\\docType{package}\n\\title{\\packageTitle{descPkg}}\n\\description{\n\\packageDescription{descPkg}\n}\n```\n\n```\n# R\/foo.R empty\n```\n\nWe get:\n\n```\ntools::undoc(dir = \"descPkg\")\n# Error: descPkg-package.Rd:5: file '.\/DESCRIPTION' does not exist\n\nsetwd(\"descPkg\")\nlengths(tools::undoc(dir = \".\"))\n# code objects    data sets   S4 classes   S4 methods \n#            0            0            0            0 \n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1760939898.924629",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vDIE",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18960] New: tools::undoc(dir=) errors unless dir=\".\" in the presence of Rd with \\packageDescription macro",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18960"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18960\n           Summary: tools::undoc(dir=) errors unless dir=\".\" in the\n                    presence of Rd with \\packageDescription macro\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Misc\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:michaelchirico4@gmail.com",
                                "text": "michaelchirico4@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": "\n\nReprex:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "descPkg\n├── DESCRIPTION\n├── man\n│   └── descPkg-package.Rd\n└── R\n    └── foo.R\n\n3 directories, 3 files\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nContents:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "# DESCRIPTION\nTitle: descPkg\nPackage: descPkg\nDescription: a package using \\packageDescription\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "% man\/descPkg-package.Rd\n\\name{descPkg-package}\n\\alias{descPkg-package}\n\\alias{descPkg}\n\\docType{package}\n\\title{\\packageTitle{descPkg}}\n\\description{\n\\packageDescription{descPkg}\n}\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "# R\/foo.R empty\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nWe get:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "tools::undoc(dir = \"descPkg\")\n# Error: descPkg-package.Rd:5: file '.\/DESCRIPTION' does not exist\n\nsetwd(\"descPkg\")\nlengths(tools::undoc(dir = \".\"))\n# code objects    data sets   S4 classes   S4 methods \n#            0            0            0            0 \n"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18960] tools::undoc(dir=) errors unless dir=\".\" in the presence of Rd with \\packageDescription macro*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18960>\n\n--- Comment #1 from Michael Chirico (<mailto:michaelchirico4@gmail.com|michaelchirico4@gmail.com>) ---\nThe same affects `tools::Rd_db(dir = 'descPkg')`, and seems to be a general\nproblem of `prepare_Rd()` where `stages='build'`, e.g.\n\n```\ntools::Rd2Ex(\"descPkg\/man\/descPkg-package.Rd\", stages='build')\n# Error: descPkg-package.Rd:5: file '.\/DESCRIPTION' does not exist\n```\n\nShould this be fixed in `prepare_Rd()`, then?",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1760941497.184359",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "0DV",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18960] tools::undoc(dir=) errors unless dir=\".\" in the presence of Rd with \\packageDescription macro",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18960"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #1 from Michael Chirico ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:michaelchirico4@gmail.com",
                                "text": "michaelchirico4@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nThe same affects "
                            },
                            {
                                "type": "text",
                                "text": "tools::Rd_db(dir = 'descPkg')",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", and seems to be a general\nproblem of "
                            },
                            {
                                "type": "text",
                                "text": "prepare_Rd()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " where "
                            },
                            {
                                "type": "text",
                                "text": "stages='build'",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", e.g.\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "tools::Rd2Ex(\"descPkg\/man\/descPkg-package.Rd\", stages='build')\n# Error: descPkg-package.Rd:5: file '.\/DESCRIPTION' does not exist\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nShould this be fixed in "
                            },
                            {
                                "type": "text",
                                "text": "prepare_Rd()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", then?"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]