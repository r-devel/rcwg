[
    {
        "subtype": "bot_message",
        "text": "*[Bug 18971] all.equal examples are wrong, check.class is ignored*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18971>\n\n--- Comment #3 from Martin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) ---\nI have committed (slightly more extensive) the changes to \n`all.equal.default()` ensuring it passes  `check.class` to all three\n\"`all.equal.&lt;atomic&gt;`\" it covers currently *and* that these do now obey a\n`check.class` argument\n-- in svn rev 89061.\n\nFor the 2nd part, the use of   `use.names=TRUE` :\nIt does what it was designed and documented to do.\nYou expected something else, namely that the *order* of list components should\nnot matter (at least in the case all list elements are named (!)),\nbut that was never the intention.\nIt's only about using *names* as opposed to the integer indices in the\n*message* text in case `all.equal.list()` decides to  \"say 'no'\" and return a\ncharacter vector.\nAllowing for permutation of the named list entries, maybe another desirable\nfeature, but would have to be implemented carefully, as you want to also deal\nwith partly named and partly unnamed list components and how to compare two\nlists with such properties.\n\nAs a frequent user of `all.equal()` myself, I have always dealt with this with\n1-2 lines of code myself, \"just\" re-ordering the second list (`current`) with\nthe names of the first list (`target`) *but* then assuming that all list\nelements are named in both lists.\nSomething like\n```r\nall.equal(target, current[names(target)], &lt;further optional args&gt;)\n```\nNow we *could* ask for a feature, by default off, e.g., `match.names = FALSE`\nwhich when set to TRUE would do the comparison of the two lists after using the\nnames to match the two lists.  All the unnamed list elements would still to\nhave to match by position... and I'm not sure it's worth or simple on how to do\nthis generally. \n\nIf you'd like to propose a patch to  as.equal.list() with such an extra feature\n(and provide test examples for that etc), I think you should open a new\nbugzilla PR ... and label it as \"wish for enhancement\" or similar.\n\nHence, I propose to close this one as \"fixed\"  (after a couple of days).",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1764091905.965109",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "vo2",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18971] all.equal examples are wrong, check.class is ignored",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18971"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #3 from Martin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nI have committed (slightly more extensive) the changes to \n"
                            },
                            {
                                "type": "text",
                                "text": "all.equal.default()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " ensuring it passes  "
                            },
                            {
                                "type": "text",
                                "text": "check.class",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to all three\n\""
                            },
                            {
                                "type": "text",
                                "text": "all.equal.<atomic>",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\" it covers currently "
                            },
                            {
                                "type": "text",
                                "text": "and",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " that these do now obey a\n"
                            },
                            {
                                "type": "text",
                                "text": "check.class",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " argument\n-- in svn rev 89061.\n\nFor the 2nd part, the use of   "
                            },
                            {
                                "type": "text",
                                "text": "use.names=TRUE",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " :\nIt does what it was designed and documented to do.\nYou expected something else, namely that the "
                            },
                            {
                                "type": "text",
                                "text": "order",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " of list components should\nnot matter (at least in the case all list elements are named (!)),\nbut that was never the intention.\nIt's only about using "
                            },
                            {
                                "type": "text",
                                "text": "names",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " as opposed to the integer indices in the\n"
                            },
                            {
                                "type": "text",
                                "text": "message",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " text in case "
                            },
                            {
                                "type": "text",
                                "text": "all.equal.list()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " decides to  \"say 'no'\" and return a\ncharacter vector.\nAllowing for permutation of the named list entries, maybe another desirable\nfeature, but would have to be implemented carefully, as you want to also deal\nwith partly named and partly unnamed list components and how to compare two\nlists with such properties.\n\nAs a frequent user of "
                            },
                            {
                                "type": "text",
                                "text": "all.equal()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " myself, I have always dealt with this with\n1-2 lines of code myself, \"just\" re-ordering the second list ("
                            },
                            {
                                "type": "text",
                                "text": "current",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ") with\nthe names of the first list ("
                            },
                            {
                                "type": "text",
                                "text": "target",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ") "
                            },
                            {
                                "type": "text",
                                "text": "but",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " then assuming that all list\nelements are named in both lists.\nSomething like"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "r\nall.equal(target, current[names(target)], <further optional args>)\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "Now we "
                            },
                            {
                                "type": "text",
                                "text": "could",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " ask for a feature, by default off, e.g., "
                            },
                            {
                                "type": "text",
                                "text": "match.names = FALSE",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\nwhich when set to TRUE would do the comparison of the two lists after using the\nnames to match the two lists.  All the unnamed list elements would still to\nhave to match by position... and I'm not sure it's worth or simple on how to do\nthis generally. \n\nIf you'd like to propose a patch to  as.equal.list() with such an extra feature\n(and provide test examples for that etc), I think you should open a new\nbugzilla PR ... and label it as \"wish for enhancement\" or similar.\n\nHence, I propose to close this one as \"fixed\"  (after a couple of days)."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]