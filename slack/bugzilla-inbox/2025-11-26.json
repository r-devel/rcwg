[
    {
        "subtype": "bot_message",
        "text": "*[Bug 18972] New: diff(x=&lt;m-by-n&gt;, l, d) drops dimensions when l*d &gt;= m*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18972>\n\n            Bug ID: 18972\n           Summary: diff(x=&lt;m-by-n&gt;, l, d) drops dimensions when l*d &gt;= m\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: Other\n                OS: Other\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Language\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:jaganmn@mcmaster.ca|jaganmn@mcmaster.ca>\n\nCreated attachment 3568\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3568&amp;action=edit>\namends `lag*differences &gt;= nrow(x)` branches of four `diff` methods\n\nIt is documented that `diff` when applied to a matrix `x` operates on the\ncolumns of `x`, implying that the return value in that case is a matrix with\n`ncol(x)` columns.  Currently, that implication holds except when\n`lag*differences &gt;= nrow(x)`; in that case, the return value is a not a matrix\nwith 0 rows but rather a dimensionless vector of length 0.\n\nThis patch adjusts all of `diff.default`, `diff.ts`, `diff.Date` and\n`diff.POSIXt`, adding a test for each, so that they give a matrix result also\nin this boundary case.  `diff.difftime` dispatches `diff.default`, so it is\nunchanged.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1764150502.026389",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "m5G",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "*[Bug 18972] New: diff(x=<m-by-n>, l, d) drops dimensions when l*d >= m*\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18972"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18972\n           Summary: diff(x=<m-by-n>, l, d) drops dimensions when l*d >= m\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: Other\n                OS: Other\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Language\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:jaganmn@mcmaster.ca",
                                "text": "jaganmn@mcmaster.ca"
                            },
                            {
                                "type": "text",
                                "text": "\n\nCreated attachment 3568\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3568&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3568&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\namends "
                            },
                            {
                                "type": "text",
                                "text": "lag*differences >= nrow(x)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " branches of four "
                            },
                            {
                                "type": "text",
                                "text": "diff",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " methods\n\nIt is documented that "
                            },
                            {
                                "type": "text",
                                "text": "diff",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " when applied to a matrix "
                            },
                            {
                                "type": "text",
                                "text": "x",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " operates on the\ncolumns of "
                            },
                            {
                                "type": "text",
                                "text": "x",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", implying that the return value in that case is a matrix with\n"
                            },
                            {
                                "type": "text",
                                "text": "ncol(x)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " columns.  Currently, that implication holds except when\n"
                            },
                            {
                                "type": "text",
                                "text": "lag*differences >= nrow(x)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "; in that case, the return value is a not a matrix\nwith 0 rows but rather a dimensionless vector of length 0.\n\nThis patch adjusts all of "
                            },
                            {
                                "type": "text",
                                "text": "diff.default",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", "
                            },
                            {
                                "type": "text",
                                "text": "diff.ts",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", "
                            },
                            {
                                "type": "text",
                                "text": "diff.Date",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and\n"
                            },
                            {
                                "type": "text",
                                "text": "diff.POSIXt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", adding a test for each, so that they give a matrix result also\nin this boundary case.  "
                            },
                            {
                                "type": "text",
                                "text": "diff.difftime",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " dispatches "
                            },
                            {
                                "type": "text",
                                "text": "diff.default",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", so it is\nunchanged."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18972] diff(x=&lt;m-by-n&gt;, l, d) drops dimensions when l*d &gt;= m*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18972>\n\n--- Comment #1 from Mikael Jagan (<mailto:jaganmn@mcmaster.ca|jaganmn@mcmaster.ca>) ---\nI neglected to share a code example, not counting the tests added by the patch,\nso here is one:\n\n```\n&gt; m &lt;- diag(6L)\n&gt; diff(m, differences = 4L)\n     [,1] [,2] [,3] [,4] [,5] [,6]\n[1,]    1   -4    6   -4    1    0\n[2,]    0    1   -4    6   -4    1\n&gt; diff(m, differences = 5L)\n     [,1] [,2] [,3] [,4] [,5] [,6]\n[1,]   -1    5  -10   10   -5    1\n&gt; diff(m, differences = 6L)\nnumeric(0)\n```\n\nOne expects the last call to return a matrix with 0 rows:\n\n```\n&gt; m[0L, , drop = FALSE]\n     [,1] [,2] [,3] [,4] [,5] [,6]\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1764171111.567339",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "8cg",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "*[Bug 18972] diff(x=<m-by-n>, l, d) drops dimensions when l*d >= m*\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18972"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #1 from Mikael Jagan ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:jaganmn@mcmaster.ca",
                                "text": "jaganmn@mcmaster.ca"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nI neglected to share a code example, not counting the tests added by the patch,\nso here is one:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "> m <- diag(6L)\n> diff(m, differences = 4L)\n     [,1] [,2] [,3] [,4] [,5] [,6]\n[1,]    1   -4    6   -4    1    0\n[2,]    0    1   -4    6   -4    1\n> diff(m, differences = 5L)\n     [,1] [,2] [,3] [,4] [,5] [,6]\n[1,]   -1    5  -10   10   -5    1\n> diff(m, differences = 6L)\nnumeric(0)\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nOne expects the last call to return a matrix with 0 rows:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "> m[0L, , drop = FALSE]\n     [,1] [,2] [,3] [,4] [,5] [,6]\n"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18971] all.equal examples are wrong, check.class is ignored*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18971>\n\n--- Comment #4 from Jan Gorecki (<mailto:j.gorecki@wit.edu.pl|j.gorecki@wit.edu.pl>) ---\nsounds good to me. Thank you",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1764185720.432999",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "\/TSUB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18971] all.equal examples are wrong, check.class is ignored",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18971"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #4 from Jan Gorecki ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:j.gorecki@wit.edu.pl",
                                "text": "j.gorecki@wit.edu.pl",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nsounds good to me. Thank you"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18972] diff(x=&lt;m-by-n&gt;, l, d) drops dimensions when l*d &gt;= m*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18972>\n\nMikael Jagan (<mailto:jaganmn@mcmaster.ca|jaganmn@mcmaster.ca>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n   Attachment #3568|0                           |1\n        is obsolete|                            |\n\n--- Comment #2 from Mikael Jagan (<mailto:jaganmn@mcmaster.ca|jaganmn@mcmaster.ca>) ---\nCreated attachment 3569\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3569&amp;action=edit>\nall methods keeping `colnames`, `names(dimnames)`\n\nThe original changes to `diff.Date` and `diff.POSIXt` did not preserve\n`colnames` or `names(dimnames)`.  This patch solves that (and amends the\nregression test so that it uses a fully named matrix).",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1764192139.656249",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "XIA",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "*[Bug 18972] diff(x=<m-by-n>, l, d) drops dimensions when l*d >= m*\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18972"
                            },
                            {
                                "type": "text",
                                "text": "\n\nMikael Jagan ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:jaganmn@mcmaster.ca",
                                "text": "jaganmn@mcmaster.ca"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n   Attachment #3568|0                           |1\n        is obsolete|                            |\n\n--- Comment #2 from Mikael Jagan ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:jaganmn@mcmaster.ca",
                                "text": "jaganmn@mcmaster.ca"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCreated attachment 3569\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3569&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3569&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nall methods keeping "
                            },
                            {
                                "type": "text",
                                "text": "colnames",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", "
                            },
                            {
                                "type": "text",
                                "text": "names(dimnames)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n\nThe original changes to "
                            },
                            {
                                "type": "text",
                                "text": "diff.Date",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "text",
                                "text": "diff.POSIXt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " did not preserve\n"
                            },
                            {
                                "type": "text",
                                "text": "colnames",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " or "
                            },
                            {
                                "type": "text",
                                "text": "names(dimnames)",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ".  This patch solves that (and amends the\nregression test so that it uses a fully named matrix)."
                            }
                        ]
                    }
                ]
            }
        ]
    }
]