[
    {
        "subtype": "bot_message",
        "text": "*[Bug 15853] chol problem with positive semi definite matrix and pivoting*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=15853>\n\nPeter Dalgaard (<mailto:pd.mes@cbs.dk|pd.mes@cbs.dk>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|NEW                         |CONFIRMED\n\n--- Comment #8 from Peter Dalgaard (<mailto:pd.mes@cbs.dk|pd.mes@cbs.dk>) ---\nI was going to file a fresh bug report, but it really seems to be the same\nissue as this one, or at least part of it: The non-zeroing of the trailing part\nof the factored matrix is a plain bug and should get fixed asap.\n\nIt can get pretty bad. Here starting with everyone's favourite \"accidentally\"\nsingular matrix:\n\nA &lt;- matrix(1:16,4)\n(AtA &lt;- crossprod(A))\n(Q &lt;- chol(AtA, pivot=TRUE))\noo &lt;- order(attr(Q,\"pivot\"))\ncrossprod(Q[,oo]) # NOT = AtA\ncrossprod(Q)[oo, oo] # ditto\ncrossprod(Q[1:2,oo]) # This works, though\n\nOutput:\n\nA &lt;- matrix(1:16,4)\n(AtA &lt;- crossprod(A))\n    [,1] [,2] [,3] [,4]\n[1,]   30   70  110  150\n[2,]   70  174  278  382\n[3,]  110  278  446  614\n[4,]  150  382  614  846\n(Q &lt;- chol(AtA, pivot=TRUE))\n        [,1]     [,2]       [,3]       [,4]\n[1,] 29.08608 5.157106 21.1097548  13.133431\n[2,]  0.00000 1.845062  0.6150208   1.230042\n[3,]  0.00000 0.000000  0.0000000 278.000000\n[4,]  0.00000 0.000000  0.0000000 174.000000\nattr(,\"pivot\")\n[1] 4 1 3 2\nattr(,\"rank\")\n[1] 2\nWarning message:\nIn chol.default(AtA, pivot = TRUE) :\n the matrix is either rank-deficient or not positive definite\noo &lt;- order(attr(Q,\"pivot\"))\ncrossprod(Q[,oo]) # NOT = AtA\n    [,1]   [,2] [,3] [,4]\n[1,]   30     70  110  150\n[2,]   70 107734  278  382\n[3,]  110    278  446  614\n[4,]  150    382  614  846\ncrossprod(Q)[oo, oo] # ditto\n    [,1]   [,2] [,3] [,4]\n[1,]   30     70  110  150\n[2,]   70 107734  278  382\n[3,]  110    278  446  614\n[4,]  150    382  614  846\ncrossprod(Q[1:2,oo]) # This works, though\n    [,1] [,2] [,3] [,4]\n[1,]   30   70  110  150\n[2,]   70  174  278  382\n[3,]  110  278  446  614\n[4,]  150  382  614  846\n\nNotice that the trailing crud in the 4th column of the pivoted Cholesky factor\nends up as a massive error in the reconstructed AtA[2,2]. The reason seems to\nbe that the LAPACK algorithm simply stops when hitting the first nonpositive\ndiagonal element and, being an in-place algorithm, leaves parts of the original\nmatrix. AFAICT, LAPACK doesn't promise to do anything else, so it is R's\nproblem to zero out the remaining entries, and\/or update the documentation\nabout the pivoted case. \n\n(Notice that the issue only happens if (n - r) &gt;= 2 and therefore is missed by\nthe help page example.)",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1765189402.635679",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "rROB",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 15853] chol problem with positive semi definite matrix and pivoting",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=15853"
                            },
                            {
                                "type": "text",
                                "text": "\n\nPeter Dalgaard ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:pd.mes@cbs.dk",
                                "text": "pd.mes@cbs.dk"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n             Status|NEW                         |CONFIRMED\n\n--- Comment #8 from Peter Dalgaard ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:pd.mes@cbs.dk",
                                "text": "pd.mes@cbs.dk"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nI was going to file a fresh bug report, but it really seems to be the same\nissue as this one, or at least part of it: The non-zeroing of the trailing part\nof the factored matrix is a plain bug and should get fixed asap.\n\nIt can get pretty bad. Here starting with everyone's favourite \"accidentally\"\nsingular matrix:\n\nA <- matrix(1:16,4)\n(AtA <- crossprod(A))\n(Q <- chol(AtA, pivot=TRUE))\noo <- order(attr(Q,\"pivot\"))\ncrossprod(Q[,oo]) # NOT = AtA\ncrossprod(Q)[oo, oo] # ditto\ncrossprod(Q[1:2,oo]) # This works, though\n\nOutput:\n\nA <- matrix(1:16,4)\n(AtA <- crossprod(A))\n    [,1] [,2] [,3] [,4]\n[1,]   30   70  110  150\n[2,]   70  174  278  382\n[3,]  110  278  446  614\n[4,]  150  382  614  846\n(Q <- chol(AtA, pivot=TRUE))\n        [,1]     [,2]       [,3]       [,4]\n[1,] 29.08608 5.157106 21.1097548  13.133431\n[2,]  0.00000 1.845062  0.6150208   1.230042\n[3,]  0.00000 0.000000  0.0000000 278.000000\n[4,]  0.00000 0.000000  0.0000000 174.000000\nattr(,\"pivot\")\n[1] 4 1 3 2\nattr(,\"rank\")\n[1] 2\nWarning message:\nIn chol.default(AtA, pivot = TRUE) :\n the matrix is either rank-deficient or not positive definite\noo <- order(attr(Q,\"pivot\"))\ncrossprod(Q[,oo]) # NOT = AtA\n    [,1]   [,2] [,3] [,4]\n[1,]   30     70  110  150\n[2,]   70 107734  278  382\n[3,]  110    278  446  614\n[4,]  150    382  614  846\ncrossprod(Q)[oo, oo] # ditto\n    [,1]   [,2] [,3] [,4]\n[1,]   30     70  110  150\n[2,]   70 107734  278  382\n[3,]  110    278  446  614\n[4,]  150    382  614  846\ncrossprod(Q[1:2,oo]) # This works, though\n    [,1] [,2] [,3] [,4]\n[1,]   30   70  110  150\n[2,]   70  174  278  382\n[3,]  110  278  446  614\n[4,]  150  382  614  846\n\nNotice that the trailing crud in the 4th column of the pivoted Cholesky factor\nends up as a massive error in the reconstructed AtA[2,2]. The reason seems to\nbe that the LAPACK algorithm simply stops when hitting the first nonpositive\ndiagonal element and, being an in-place algorithm, leaves parts of the original\nmatrix. AFAICT, LAPACK doesn't promise to do anything else, so it is R's\nproblem to zero out the remaining entries, and\/or update the documentation\nabout the pivoted case. \n\n(Notice that the issue only happens if (n - r) >= 2 and therefore is missed by\nthe help page example.)"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18973] Replacment in 1d-arrays using names looses dimension*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18973>\n\nMartin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |maechler@stat.math.ethz.ch\n     Ever confirmed|0                           |1\n             Status|UNCONFIRMED                 |CONFIRMED\n\n--- Comment #1 from Martin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) ---\nAlmost surely the exact behaviour what should happen here is *not* documented.\nOTOH, to treat an integer index differently from a named-index is so clearly\ninconsistent, that I do agree this is a bug.\n\nI've now spent a few hours reading `subassign.c` and then `substring.c` and\nusing `R-devel -d gdb` (after compiling a version with optimizations turned off\nvia `-O0` CFLAG.\nNotably static C function `stringSubscript()`, the latter being preceded by\nencouraging comments\n```\n\/* This uses a couple of horrible hacks in conjunction with\n * VectorAssign (in subassign.c).  .......\n\n```\n\nIn spite of those, I was able to fix the bug .. hopefully not breaking\nsomething else.\nI will do some more tests before committing..",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1765202232.325479",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "5Fyy",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18973] Replacment in 1d-arrays using names looses dimension",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18973"
                            },
                            {
                                "type": "text",
                                "text": "\n\nMartin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |maechler@stat.math.ethz.ch\n     Ever confirmed|0                           |1\n             Status|UNCONFIRMED                 |CONFIRMED\n\n--- Comment #1 from Martin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nAlmost surely the exact behaviour what should happen here is "
                            },
                            {
                                "type": "text",
                                "text": "not",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " documented.\nOTOH, to treat an integer index differently from a named-index is so clearly\ninconsistent, that I do agree this is a bug.\n\nI've now spent a few hours reading "
                            },
                            {
                                "type": "text",
                                "text": "subassign.c",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and then "
                            },
                            {
                                "type": "text",
                                "text": "substring.c",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and\nusing "
                            },
                            {
                                "type": "text",
                                "text": "R-devel -d gdb",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " (after compiling a version with optimizations turned off\nvia "
                            },
                            {
                                "type": "text",
                                "text": "-O0",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " CFLAG.\nNotably static C function "
                            },
                            {
                                "type": "text",
                                "text": "stringSubscript()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", the latter being preceded by\nencouraging comments"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\/* This uses a couple of horrible hacks in conjunction with\n * VectorAssign (in subassign.c).  .......\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nIn spite of those, I was able to fix the bug .. hopefully not breaking\nsomething else.\nI will do some more tests before committing.."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18304] sequence.default does not recycle nvec to length(from) or length(by)*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18304>\n\nMartin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n         Resolution|---                         |FIXED\n             Status|CONFIRMED                   |CLOSED\n\n--- Comment #8 from Martin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) ---\n(In reply to Mikael Jagan from comment #6)\nI've decided to use a shorter argument name, now (as people want to \"forbid\"\nabbreviating argument names ..), and settled w\/  `recycle`  and \nenvironment variable  `R_sequence_recycle`.\n\nTo use \"future behaviour\", documentation &amp; warnings now suggest to explicitly\nusing `recycle = TRUE`  as that will eventually become the default.\n\nI've committed the changes now, svn rev 89122, to R-devel and am closing the PR\nnow.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1765209090.331819",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Yc+70",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18304] sequence.default does not recycle nvec to length(from) or length(by)",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18304"
                            },
                            {
                                "type": "text",
                                "text": "\n\nMartin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n         Resolution|---                         |FIXED\n             Status|CONFIRMED                   |CLOSED\n\n--- Comment #8 from Martin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\n(In reply to Mikael Jagan from comment #6)\nI've decided to use a shorter argument name, now (as people want to \"forbid\"\nabbreviating argument names ..), and settled w\/  "
                            },
                            {
                                "type": "text",
                                "text": "recycle",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "  and \nenvironment variable  "
                            },
                            {
                                "type": "text",
                                "text": "R_sequence_recycle",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ".\n\nTo use \"future behaviour\", documentation & warnings now suggest to explicitly\nusing "
                            },
                            {
                                "type": "text",
                                "text": "recycle = TRUE",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "  as that will eventually become the default.\n\nI've committed the changes now, svn rev 89122, to R-devel and am closing the PR\nnow."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18970] wrapper around `proportions()` to ease publication-like table preparation [with patch]*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18970>\n\n--- Comment #2 from Thomas Soeiro (<mailto:Thomas.SOEIRO@ap-hm.fr|Thomas.SOEIRO@ap-hm.fr>) ---\nFWIW, this option seems to exist in SPSS and Stata. It is called \"valid\npercent\". (Please note that I do not have the software available so I cannot\ntest).\n\nFor SPSS, from\n<https:\/\/www.ibm.com\/docs\/en\/spss-statistics\/cd?topic=frequencies-missing-subcommand-command>:\n\n&gt; By default, both user-missing and system-missing values are labeled as missing in the table but are not included in the valid and cumulative percentages, in the calculation of descriptive statistics, or in charts and histograms.\n\nExamples here : <https:\/\/libguides.library.kent.edu\/SPSS\/FrequenciesCategorical>\n\nFor Stata, from <https:\/\/www.stata.com\/manuals\/rtabulateoneway.pdf>:\n\n&gt; missing requests that missing values be treated like other values in calculations of counts, percentages, and other statistics.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1765211641.923019",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "bf92N",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18970] wrapper around ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "proportions()",
                                "style": {
                                    "bold": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to ease publication-like table preparation [with patch]",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18970"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #2 from Thomas Soeiro ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:Thomas.SOEIRO@ap-hm.fr",
                                "text": "Thomas.SOEIRO@ap-hm.fr",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nFWIW, this option seems to exist in SPSS and Stata. It is called \"valid\npercent\". (Please note that I do not have the software available so I cannot\ntest).\n\nFor SPSS, from\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/www.ibm.com\/docs\/en\/spss-statistics\/cd?topic=frequencies-missing-subcommand-command"
                            },
                            {
                                "type": "text",
                                "text": ":\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": "By default, both user-missing and system-missing values are labeled as missing in the table but are not included in the valid and cumulative percentages, in the calculation of descriptive statistics, or in charts and histograms."
                            }
                        ],
                        "contains_padding": true
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nExamples here : "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/libguides.library.kent.edu\/SPSS\/FrequenciesCategorical"
                            },
                            {
                                "type": "text",
                                "text": "\n\nFor Stata, from "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/www.stata.com\/manuals\/rtabulateoneway.pdf"
                            },
                            {
                                "type": "text",
                                "text": ":\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": "missing requests that missing values be treated like other values in calculations of counts, percentages, and other statistics."
                            }
                        ],
                        "contains_padding": true
                    }
                ]
            }
        ]
    }
]