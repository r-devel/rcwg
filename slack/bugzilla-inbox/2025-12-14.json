[
    {
        "subtype": "bot_message",
        "text": "*[Bug 18970] wrapper around `proportions()` to ease publication-like table preparation [with patch]*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18970>\n\n--- Comment #4 from Thomas Soeiro (<mailto:Thomas.SOEIRO@ap-hm.fr|Thomas.SOEIRO@ap-hm.fr>) ---\nIn response to comment 3:\n\n&gt; The issue of how to handle the \"valid percent\" issue is with the `useNA` argument in `table()`.\n\nReporting guidelines for both interventional and observational health studies\nrecommend providing both the number of missing observations *and* the\npercentage calculated on \"valid\" cases. Getting a table with both is currently\nnot so easy in base R. The proposed helper is an attempt to address that. I\nshould have made this clearer in my initial post, sorry!\n\n&gt; It's basically true that it is very challenging to get \"nice\" crosstabs, similar to what you get in the commercial software, in base R. The use of magic numbers for controlling the calculation of proportions is confusing and inconsistent. But it has been that way forever and I'd suspect that a rethinking would be very disruptive.\n\nYes, of course, hence the proposal for a simple helper that sticks to the\nestablished semantics.\n\n&gt; As someone who teaches in a field which uses crosstabs *a lot*, it's frustrating. But there are many packages that give you options for such flexibility to get the output that you want and will also output them nicely to LaTex.\n\nAs a practitioner in a field that also uses crosstabs *a lot*, I agree! (I've\ngot some \"antecedents\" with reports and suggestions related to `table()`,\n`xtabs()`, and `ftable()` :)) I've had this helper function in my personal\npackage for quite some time, and I thought it may be a useful addition to base\nR. Dedicated packages for making table are nice, but they often feel like\noverkill (with many dependences).\n\nStill, I'm afraid I probably should have posted this to R-devel rather than\ndirectly to Bugzilla...",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1765754674.846279",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "LRhU=",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18970] wrapper around ",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "proportions()",
                                "style": {
                                    "bold": true,
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to ease publication-like table preparation [with patch]",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18970"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #4 from Thomas Soeiro ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:Thomas.SOEIRO@ap-hm.fr",
                                "text": "Thomas.SOEIRO@ap-hm.fr",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nIn response to comment 3:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": "The issue of how to handle the \"valid percent\" issue is with the "
                            },
                            {
                                "type": "text",
                                "text": "useNA",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " argument in "
                            },
                            {
                                "type": "text",
                                "text": "table()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "."
                            }
                        ],
                        "contains_padding": true
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nReporting guidelines for both interventional and observational health studies\nrecommend providing both the number of missing observations "
                            },
                            {
                                "type": "text",
                                "text": "and",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " the\npercentage calculated on \"valid\" cases. Getting a table with both is currently\nnot so easy in base R. The proposed helper is an attempt to address that. I\nshould have made this clearer in my initial post, sorry!\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": "It's basically true that it is very challenging to get \"nice\" crosstabs, similar to what you get in the commercial software, in base R. The use of magic numbers for controlling the calculation of proportions is confusing and inconsistent. But it has been that way forever and I'd suspect that a rethinking would be very disruptive."
                            }
                        ],
                        "contains_padding": true
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nYes, of course, hence the proposal for a simple helper that sticks to the\nestablished semantics.\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": "As someone who teaches in a field which uses crosstabs "
                            },
                            {
                                "type": "text",
                                "text": "a lot",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", it's frustrating. But there are many packages that give you options for such flexibility to get the output that you want and will also output them nicely to LaTex."
                            }
                        ],
                        "contains_padding": true
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nAs a practitioner in a field that also uses crosstabs "
                            },
                            {
                                "type": "text",
                                "text": "a lot",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", I agree! (I've\ngot some \"antecedents\" with reports and suggestions related to "
                            },
                            {
                                "type": "text",
                                "text": "table()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ",\n"
                            },
                            {
                                "type": "text",
                                "text": "xtabs()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", and "
                            },
                            {
                                "type": "text",
                                "text": "ftable()",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " :)) I've had this helper function in my personal\npackage for quite some time, and I thought it may be a useful addition to base\nR. Dedicated packages for making table are nice, but they often feel like\noverkill (with many dependences).\n\nStill, I'm afraid I probably should have posted this to R-devel rather than\ndirectly to Bugzilla..."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18980] New: subset.data.frame error message*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18980>\n\n            Bug ID: 18980\n           Summary: subset.data.frame error message\n           Product: R\n           Version: R 4.5.x\n          Hardware: Other\n                OS: Other\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Misc\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:ivo.welch@gmail.com|ivo.welch@gmail.com>\n\n...\n      vars &lt;- if (missing(select))\n          rep_len(TRUE, ncol(x))\n      else {\n          ## INSERT HERE ##\n          nl &lt;- as.list(seq_along(x))\n      ...\n\n\nINSERT\n\n      sel_expr &lt;- substitute(select)                                            \n\n      ## evaluate once in caller to detect character selection                  \n      sel_val &lt;- try(eval(sel_expr, parent.frame()), silent = TRUE)             \n\n      if (is.character(sel_val)) {                                              \n        missing_vars &lt;- setdiff(sel_val, names(x))                              \n        if (length(missing_vars)) {                                             \n          stop(                                                                 \n              \"in `[.data.frame`(x, r, vars, drop = drop) :\\n  \",               \n            \"undefined columns in 'select': \",                                  \n            paste(missing_vars, collapse = \", \"),                               \n            call. = FALSE                                                       \n          )                                                                     \n        }                                                                       \n        sel_val                                                                 \n      } else {                                                                  \n        sel_vars &lt;- all.vars(sel_expr)                                          \n        missing_vars &lt;- setdiff(sel_vars, names(x))                             \n\n        if (length(missing_vars)) {                                             \n          stop(                                                                 \n              \"in `[.data.frame`(x, r, vars, drop = drop) :\\n  \",               \n            \"undefined columns in 'select': \",                                  \n            paste(missing_vars, collapse = \", \"),                               \n            call. = FALSE                                                       \n          )                                                                     \n        }\n\n\nand now for\n\nd &lt;- data.frame( a=rnorm(20), b=rnorm(20), c=rnorm(20), d=rnorm(20) )\nxsubset.data.frame( d, TRUE, select=c(\"a\", \"yz\") )\n\nwe get\n\nError : in `[.data.frame`(x, r, vars, drop = drop) :\n  undefined columns in 'select': yz\n\ninstead of\n\nError in `[.data.frame`(x, r, vars, drop = drop) : \n  undefined columns selected",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1765761774.466229",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "WLR",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18980] New: subset.data.frame error message",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18980"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18980\n           Summary: subset.data.frame error message\n           Product: R\n           Version: R 4.5.x\n          Hardware: Other\n                OS: Other\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Misc\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:ivo.welch@gmail.com",
                                "text": "ivo.welch@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": "\n\n...\n      vars <- if (missing(select))\n          rep_len(TRUE, ncol(x))\n      else {\n          ## INSERT HERE ##\n          nl <- as.list(seq_along(x))\n      ...\n\n\n\nINSERT\n\n      sel_expr <- substitute(select)                                            \n\n      ## evaluate once in caller to detect character selection                  \n      sel_val <- try(eval(sel_expr, parent.frame()), silent = TRUE)             \n\n      if (is.character(sel_val)) {                                              \n        missing_vars <- setdiff(sel_val, names(x))                              \n        if (length(missing_vars)) {                                             \n          stop(                                                                 \n              \"in "
                            },
                            {
                                "type": "text",
                                "text": "[.data.frame",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "(x, r, vars, drop = drop) :\\n  \",               \n            \"undefined columns in 'select': \",                                  \n            paste(missing_vars, collapse = \", \"),                               \n            call. = FALSE                                                       \n          )                                                                     \n        }                                                                       \n        sel_val                                                                 \n      } else {                                                                  \n        sel_vars <- all.vars(sel_expr)                                          \n        missing_vars <- setdiff(sel_vars, names(x))                             \n\n        if (length(missing_vars)) {                                             \n          stop(                                                                 \n              \"in "
                            },
                            {
                                "type": "text",
                                "text": "[.data.frame",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "(x, r, vars, drop = drop) :\\n  \",               \n            \"undefined columns in 'select': \",                                  \n            paste(missing_vars, collapse = \", \"),                               \n            call. = FALSE                                                       \n          )                                                                     \n        }\n\n\n\nand now for\n\nd <- data.frame( a=rnorm(20), b=rnorm(20), c=rnorm(20), d=rnorm(20) )\nxsubset.data.frame( d, TRUE, select=c(\"a\", \"yz\") )\n\nwe get\n\nError : in "
                            },
                            {
                                "type": "text",
                                "text": "[.data.frame",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "(x, r, vars, drop = drop) :\n  undefined columns in 'select': yz\n\ninstead of\n\nError in "
                            },
                            {
                                "type": "text",
                                "text": "[.data.frame",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "(x, r, vars, drop = drop) : \n  undefined columns selected"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18981] New: Compilation fails on some older (but supported) Linux distros*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18981>\n\n            Bug ID: 18981\n           Summary: Compilation fails on some older (but supported) Linux\n                    distros\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: Linux\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Installation\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:csardi.gabor@gmail.com|csardi.gabor@gmail.com>\n\nUbuntu 20.04 (in extended security support until 02 Apr 2030)\nOpenSUSE Leap 15.6 + probably SLE (in support until 30 Apr 2026)\nCentOS 7 (EOL, but probably also RHEL 7, in extended support until 31 May 2029)\nCentOS 8 (EOL, but probably also RHEL 8, in support until 31 May 2029)\n\n```\ngcc -I..\/..\/src\/extra  -I. -I..\/..\/src\/include -I..\/..\/src\/include \n-I\/usr\/local\/include -I..\/..\/src\/nmath -DHAVE_CONFIG_H   -fopenmp -fpic  -g -O2\n -c devices.c -o devices.o\ndevices.c: In function 'defaultGetEvent':\ndevices.c:423:22: error: parameter name omitted\n  423 | SEXP defaultGetEvent(SEXP, const char *)\n      |                      ^~~~\ndevices.c:423:28: error: parameter name omitted\n  423 | SEXP defaultGetEvent(SEXP, const char *)\n      |                            ^~~~~~~~~~~~\nmake[3]: *** [..\/..\/Makeconf:129: devices.o] Error 1\nmake[3]: Leaving directory '\/tmp\/R-devel\/src\/main'\nmake[2]: *** [Makefile:140: R] Error 2\nmake[2]: Leaving directory '\/tmp\/R-devel\/src\/main'\nmake[1]: *** [Makefile:28: R] Error 1\nmake[1]: Leaving directory '\/tmp\/R-devel\/src'\nmake: *** [Makefile:61: R] Error 1\n```",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1765785376.083289",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "wIsb",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18981] New: Compilation fails on some older (but supported) Linux distros",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18981"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18981\n           Summary: Compilation fails on some older (but supported) Linux\n                    distros\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: All\n                OS: Linux\n            Status: UNCONFIRMED\n          Severity: normal\n          Priority: P5\n         Component: Installation\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:csardi.gabor@gmail.com",
                                "text": "csardi.gabor@gmail.com"
                            },
                            {
                                "type": "text",
                                "text": "\n\nUbuntu 20.04 (in extended security support until 02 Apr 2030)\nOpenSUSE Leap 15.6 + probably SLE (in support until 30 Apr 2026)\nCentOS 7 (EOL, but probably also RHEL 7, in extended support until 31 May 2029)\nCentOS 8 (EOL, but probably also RHEL 8, in support until 31 May 2029)\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "gcc -I..\/..\/src\/extra  -I. -I..\/..\/src\/include -I..\/..\/src\/include \n-I\/usr\/local\/include -I..\/..\/src\/nmath -DHAVE_CONFIG_H   -fopenmp -fpic  -g -O2\n -c devices.c -o devices.o\ndevices.c: In function 'defaultGetEvent':\ndevices.c:423:22: error: parameter name omitted\n  423 | SEXP defaultGetEvent(SEXP, const char *)\n      |                      ^~~~\ndevices.c:423:28: error: parameter name omitted\n  423 | SEXP defaultGetEvent(SEXP, const char *)\n      |                            ^~~~~~~~~~~~\nmake[3]: *** [..\/..\/Makeconf:129: devices.o] Error 1\nmake[3]: Leaving directory '\/tmp\/R-devel\/src\/main'\nmake[2]: *** [Makefile:140: R] Error 2\nmake[2]: Leaving directory '\/tmp\/R-devel\/src\/main'\nmake[1]: *** [Makefile:28: R] Error 1\nmake[1]: Leaving directory '\/tmp\/R-devel\/src'\nmake: *** [Makefile:61: R] Error 1\n"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]