[
    {
        "subtype": "bot_message",
        "text": "*[Bug 18985] New: 'xlengthgets' to be more ALTREP-friendly*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985>\n\n            Bug ID: 18985\n           Summary: 'xlengthgets' to be more ALTREP-friendly\n           Product: R\n           Version: R 4.5.x\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: enhancement\n          Priority: P5\n         Component: Wishlist\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>\n\nCreated attachment 3581\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3581&amp;action=edit>\nUse INTEGER_RO etc. In xlengthgets\n\nIn function `xlengthgets` in `builtin.c`, writable pointer of `x` is requested.\nIt is actually only read.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1766854041.592579",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "sTNhr",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18985] New: 'xlengthgets' to be more ALTREP-friendly",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18985\n           Summary: 'xlengthgets' to be more ALTREP-friendly\n           Product: R\n           Version: R 4.5.x\n          Hardware: All\n                OS: All\n            Status: UNCONFIRMED\n          Severity: enhancement\n          Priority: P5\n         Component: Wishlist\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": "\n\nCreated attachment 3581\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3581&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3581&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nUse INTEGER_RO etc. In xlengthgets\n\nIn function "
                            },
                            {
                                "type": "text",
                                "text": "xlengthgets",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " in "
                            },
                            {
                                "type": "text",
                                "text": "builtin.c",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", writable pointer of "
                            },
                            {
                                "type": "text",
                                "text": "x",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is requested.\nIt is actually only read."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18985] 'xlengthgets' to be more ALTREP-friendly*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985>\n\n--- Comment #1 from Suharto Anggono (<mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>) ---\nCreated attachment 3582\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3582&amp;action=edit>\nAlternative: use INTEGER_GET_REGION etc. In xlengthgets\n\nThis is an alternative patch.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1766854214.746219",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "FENfR",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18985] 'xlengthgets' to be more ALTREP-friendly",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #1 from Suharto Anggono ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCreated attachment 3582\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3582&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3582&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nAlternative: use INTEGER_GET_REGION etc. In xlengthgets\n\nThis is an alternative patch."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18985] 'xlengthgets' to be more ALTREP-friendly*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985>\n\nSuharto Anggono (<mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n   Attachment #3582|0                           |1\n        is obsolete|                            |\n\n--- Comment #2 from Suharto Anggono (<mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>) ---\nCreated attachment 3583\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3583&amp;action=edit>\nAlternative: use INTEGER_GET_REGION etc. in xlengthgets",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1766854433.045389",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "hciP",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18985] 'xlengthgets' to be more ALTREP-friendly",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985"
                            },
                            {
                                "type": "text",
                                "text": "\n\nSuharto Anggono ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n   Attachment #3582|0                           |1\n        is obsolete|                            |\n\n--- Comment #2 from Suharto Anggono ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCreated attachment 3583\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3583&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3583&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nAlternative: use INTEGER_GET_REGION etc. in xlengthgets"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18985] 'xlengthgets' to be more ALTREP-friendly*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985>\n\nSuharto Anggono (<mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n   Attachment #3581|0                           |1\n        is obsolete|                            |\n\n--- Comment #3 from Suharto Anggono (<mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>) ---\nCreated attachment 3584\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3584&amp;action=edit>\nUse INTEGER_RO etc. in xlengthgets\n\nRevision: not calling `INTEGER_RO` etc. is if the length is zero.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1766861182.555639",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "aWl",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18985] 'xlengthgets' to be more ALTREP-friendly",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985"
                            },
                            {
                                "type": "text",
                                "text": "\n\nSuharto Anggono ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n   Attachment #3581|0                           |1\n        is obsolete|                            |\n\n--- Comment #3 from Suharto Anggono ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCreated attachment 3584\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3584&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3584&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nUse INTEGER_RO etc. in xlengthgets\n\nRevision: not calling "
                            },
                            {
                                "type": "text",
                                "text": "INTEGER_RO",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " etc. is if the length is zero."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18985] 'xlengthgets' to be more ALTREP-friendly*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985>\n\nSuharto Anggono (<mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n   Attachment #3583|0                           |1\n        is obsolete|                            |\n\n--- Comment #4 from Suharto Anggono (<mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>) ---\nCreated attachment 3585\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3585&amp;action=edit>\nAlternative: use INTEGER_GET_REGION etc. in xlengthgets",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1766861317.810829",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "Qvs",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18985] 'xlengthgets' to be more ALTREP-friendly",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985"
                            },
                            {
                                "type": "text",
                                "text": "\n\nSuharto Anggono ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n   Attachment #3583|0                           |1\n        is obsolete|                            |\n\n--- Comment #4 from Suharto Anggono ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCreated attachment 3585\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3585&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3585&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nAlternative: use INTEGER_GET_REGION etc. in xlengthgets"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18985] 'xlengthgets' to be more ALTREP-friendly*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985>\n\nSuharto Anggono (<mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n   Attachment #3584|0                           |1\n        is obsolete|                            |\n\n--- Comment #5 from Suharto Anggono (<mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>) ---\nCreated attachment 3586\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3586&amp;action=edit>\nUse INTEGER_RO etc. in xlengthgets\n\nRevision: using `len &gt; 0` instead of `len`, like the beginning of `xlengthgets`",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1766863390.335029",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "xbc",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18985] 'xlengthgets' to be more ALTREP-friendly",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985"
                            },
                            {
                                "type": "text",
                                "text": "\n\nSuharto Anggono ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n   Attachment #3584|0                           |1\n        is obsolete|                            |\n\n--- Comment #5 from Suharto Anggono ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCreated attachment 3586\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3586&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3586&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nUse INTEGER_RO etc. in xlengthgets\n\nRevision: using "
                            },
                            {
                                "type": "text",
                                "text": "len > 0",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " instead of "
                            },
                            {
                                "type": "text",
                                "text": "len",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ", like the beginning of "
                            },
                            {
                                "type": "text",
                                "text": "xlengthgets",
                                "style": {
                                    "code": true
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18985] 'xlengthgets' to be more ALTREP-friendly*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985>\n\nSuharto Anggono (<mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n   Attachment #3585|0                           |1\n        is obsolete|                            |\n\n--- Comment #6 from Suharto Anggono (<mailto:suharto_anggono@yahoo.com|suharto_anggono@yahoo.com>) ---\nCreated attachment 3587\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3587&amp;action=edit>\nAlternative: use INTEGER_GET_REGION etc. in xlengthgets",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1766863497.185619",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "iJcC",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18985] 'xlengthgets' to be more ALTREP-friendly",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18985"
                            },
                            {
                                "type": "text",
                                "text": "\n\nSuharto Anggono ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n   Attachment #3585|0                           |1\n        is obsolete|                            |\n\n--- Comment #6 from Suharto Anggono ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:suharto_anggono@yahoo.com",
                                "text": "suharto_anggono@yahoo.com"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nCreated attachment 3587\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3587&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3587&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\nAlternative: use INTEGER_GET_REGION etc. in xlengthgets"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 16659] match.arg with several.ok silently ignores incorrect arguments as long as there is one valid argument.*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=16659>\n\n--- Comment #2 from Martin Maechler (<mailto:maechler@stat.math.ethz.ch|maechler@stat.math.ethz.ch>) ---\n(In reply to Martin Maechler from comment #1)\n\nI did not get any feedback on this IIRC (also not privately).  I still have\ndecided going to use a variation of version 2 b) above:  `several.ok =\n\"all&lt;anything&gt;\"` will provide this option\nYou get an error unless *all* strings in `arg` match one of the `choices`.\nAfter all it has been proposed by a known very good R programmer, and I do\nagree that I can think of scenarios where this will be useful.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1766863733.107059",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "bbyU",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 16659] match.arg with several.ok silently ignores incorrect arguments as long as there is one valid argument.",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=16659"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #2 from Martin Maechler ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:maechler@stat.math.ethz.ch",
                                "text": "maechler@stat.math.ethz.ch",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\n(In reply to Martin Maechler from comment #1)\n\nI did not get any feedback on this IIRC (also not privately).  I still have\ndecided going to use a variation of version 2 b) above:  `several.ok =\n\"all<anything>\"` will provide this option\nYou get an error unless "
                            },
                            {
                                "type": "text",
                                "text": "all",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " strings in "
                            },
                            {
                                "type": "text",
                                "text": "arg",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " match one of the "
                            },
                            {
                                "type": "text",
                                "text": "choices",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": ".\nAfter all it has been proposed by a known very good R programmer, and I do\nagree that I can think of scenarios where this will be useful."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18986] New: Short-circuit crossprod and tcrossprod with ddot BLAS*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18986>\n\n            Bug ID: 18986\n           Summary: Short-circuit crossprod and tcrossprod with ddot BLAS\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: Other\n                OS: Other\n            Status: UNCONFIRMED\n          Severity: enhancement\n          Priority: P5\n         Component: Wishlist\n          Assignee: <mailto:R-core@R-project.org|R-core@R-project.org>\n          Reporter: <mailto:jan.garbuszus@ruhr-uni-bochum.de|jan.garbuszus@ruhr-uni-bochum.de>\n\nCreated attachment 3588\n  --&gt; <https:\/\/bugs.r-project.org\/attachment.cgi?id=3588&amp;action=edit>\npatch file for array.c to short-circuit crossprod and tcrossprod\n\nDear all,\n\nPlease find attached a patch that short-circuits crossprod() and tcrossprod()\nby directly using the BLAS ddot routine. This is not something I specifically\nneed, nor do I have a concrete real-world use case for it—I was simply curious\nand wanted to explore the idea.\n\nThe patch was inspired by an older blog post discussing different ways to\ncompute a dot product [1], which led me to experiment a bit with Rcpp:\n\nRcpp::sourceCpp(code = '\n  #include &lt;Rcpp.h&gt;\n  #include &lt;R_ext\/BLAS.h&gt;\n\n  \/\/ [[Rcpp::export]]\n  double blas_dot_product(Rcpp::NumericVector a, Rcpp::NumericVector b) {\n    int n = a.size();\n    if (n != b.size()) {\n      Rcpp::stop(\"Incompatible lengths: vectors must be the same size.\");\n    }\n\n    int inc = 1;\n    \/\/ ddot(n, x, incx, y, incy)\n    double result = F77_CALL(ddot)(&amp;n, a.begin(), &amp;inc, b.begin(), &amp;inc);\n\n    return result;\n  }\n')\n\nn &lt;- 1e7\na &lt;- runif(n)\nb &lt;- runif(n)\n\nblas_dot_product(a, b)\n\n\nWhen investigating the roughly 10 ms runtime difference compared to\ncrossprod(a, b), I looked into the implementation of crossprod() and\ntcrossprod(). In this particular case, most of the time appears to be spent\nvalidating that neither input vector contains NA, NaN, or Inf, which can be\ncostly for large vectors. I wanted to avoid this overhead and experimented with\nshort-circuiting the function, which is what the attached patch does.\n\nThe basic idea is that I do not care about the presence of NA, NaN, or Inf\nunless one of these values is actually returned. Since the dot product returns\na single scalar, I rely on the BLAS ddot function to propagate NA, NaN, or Inf\nif they occur in the inputs.\n\nThis approach works for my test case, yields a speed improvement, and does not\nbreak any existing R checks [2]. That said, I am aware of a comment in array.c\nwarning against relying on BLAS to correctly handle NaN and Inf. I am unsure\nwhether this concern applies universally to all BLAS implementations or if it\nreflects behavior observed in older R (1.x) versions. I have verified that the\ncode works on Arch Linux with OpenBLAS 0.3, and the Rcpp example above also\nworks on a current macOS system. Unfortunately, I do not have access to other\nBLAS implementations or versions for further testing. Therefore, I fully\nunderstand if you do not wish to look into this any further; nevertheless, I\nwanted to bring it up for discussion.\n\n[1] Linked here <https:\/\/fosstodon.org\/@Mehrad\/115773657671691983>\n[2] <https:\/\/github.com\/r-devel\/r-svn\/pull\/221>",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1766865486.642679",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ACM",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18986] New: Short-circuit crossprod and tcrossprod with ddot BLAS",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18986"
                            },
                            {
                                "type": "text",
                                "text": "\n\n            Bug ID: 18986\n           Summary: Short-circuit crossprod and tcrossprod with ddot BLAS\n           Product: R\n           Version: R-devel (trunk)\n          Hardware: Other\n                OS: Other\n            Status: UNCONFIRMED\n          Severity: enhancement\n          Priority: P5\n         Component: Wishlist\n          Assignee: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:R-core@R-project.org",
                                "text": "R-core@R-project.org",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n          Reporter: "
                            },
                            {
                                "type": "link",
                                "url": "mailto:jan.garbuszus@ruhr-uni-bochum.de",
                                "text": "jan.garbuszus@ruhr-uni-bochum.de",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": "\n\nCreated attachment 3588\n  --> "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3588&amp;action=edit",
                                "text": "https:\/\/bugs.r-project.org\/attachment.cgi?id=3588&action=edit"
                            },
                            {
                                "type": "text",
                                "text": "\npatch file for array.c to short-circuit crossprod and tcrossprod\n\nDear all,\n\nPlease find attached a patch that short-circuits crossprod() and tcrossprod()\nby directly using the BLAS ddot routine. This is not something I specifically\nneed, nor do I have a concrete real-world use case for it—I was simply curious\nand wanted to explore the idea.\n\nThe patch was inspired by an older blog post discussing different ways to\ncompute a dot product [1], which led me to experiment a bit with Rcpp:\n\nRcpp::sourceCpp(code = '\n  #include <Rcpp.h>\n  #include <R_ext\/BLAS.h>\n\n  \/\/ [[Rcpp::export]]\n  double blas_dot_product(Rcpp::NumericVector a, Rcpp::NumericVector b) {\n    int n = a.size();\n    if (n != b.size()) {\n      Rcpp::stop(\"Incompatible lengths: vectors must be the same size.\");\n    }\n\n    int inc = 1;\n    \/\/ ddot(n, x, incx, y, incy)\n    double result = F77_CALL(ddot)(&n, a.begin(), &inc, b.begin(), &inc);\n\n    return result;\n  }\n')\n\nn <- 1e7\na <- runif(n)\nb <- runif(n)\n\nblas_dot_product(a, b)\n\n\n\nWhen investigating the roughly 10 ms runtime difference compared to\ncrossprod(a, b), I looked into the implementation of crossprod() and\ntcrossprod(). In this particular case, most of the time appears to be spent\nvalidating that neither input vector contains NA, NaN, or Inf, which can be\ncostly for large vectors. I wanted to avoid this overhead and experimented with\nshort-circuiting the function, which is what the attached patch does.\n\nThe basic idea is that I do not care about the presence of NA, NaN, or Inf\nunless one of these values is actually returned. Since the dot product returns\na single scalar, I rely on the BLAS ddot function to propagate NA, NaN, or Inf\nif they occur in the inputs.\n\nThis approach works for my test case, yields a speed improvement, and does not\nbreak any existing R checks [2]. That said, I am aware of a comment in array.c\nwarning against relying on BLAS to correctly handle NaN and Inf. I am unsure\nwhether this concern applies universally to all BLAS implementations or if it\nreflects behavior observed in older R (1.x) versions. I have verified that the\ncode works on Arch Linux with OpenBLAS 0.3, and the Rcpp example above also\nworks on a current macOS system. Unfortunately, I do not have access to other\nBLAS implementations or versions for further testing. Therefore, I fully\nunderstand if you do not wish to look into this any further; nevertheless, I\nwanted to bring it up for discussion.\n\n[1] Linked here "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/fosstodon.org\/@Mehrad\/115773657671691983"
                            },
                            {
                                "type": "text",
                                "text": "\n[2] "
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/github.com\/r-devel\/r-svn\/pull\/221"
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18986] Short-circuit crossprod and tcrossprod with ddot BLAS*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18986>\n\nDirk Eddelbuettel (<mailto:edd@debian.org|edd@debian.org>) changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |edd@debian.org\n\n--- Comment #1 from Dirk Eddelbuettel (<mailto:edd@debian.org|edd@debian.org>) ---\n&gt;  Unfortunately, I do not have access to other BLAS implementations or versions for further testing. \n\nThere is help. As LAPACK and BLAS are in fact interfaces, it is pretty easy to\nfire up a container, even one that already has R such 'r-base' aka\n'rocker\/r-base' (for Debian; we could use rocker\/r2u for Ubuntu and so on) and\nthen use `apt` to install the different available LAPACK\/BLAS packages.  The\nfollowing is using `r-base` and Debian:\n\n```\nroot@cd5ede8e1bc0:\/# apt update -qq   # refresh the index\n62 packages can be upgraded. Run 'apt list --upgradable' to see them.\nroot@cd5ede8e1bc0:\/# apt-cache show libblas-dev  # to see the name of the\nvirtual pkg\nroot@cd5ede8e1bc0:\/# apt-cache search libblas.so  # find packages providing the\nvirtual one\nlibblis-openmp-dev - BLAS-like Library Instantiation Software Framework\n(dev,32bit,openmp)\nlibblis-pthread-dev - BLAS-like Library Instantiation Software Framework\n(dev,32bit,pthread)\nlibblis-serial-dev - BLAS-like Library Instantiation Software Framework\n(dev,32bit,serial)\nlibblis4-openmp - BLAS-like Library Instantiation Software Framework\n(32bit,openmp)\nlibblis4-pthread - BLAS-like Library Instantiation Software Framework\n(32bit,pthread)\nlibblis4-serial - BLAS-like Library Instantiation Software Framework\n(32bit,serial)\nlibblas-dev - Basic Linear Algebra Subroutines 3, static library\nlibblas3 - Basic Linear Algebra Reference implementations, shared library\nlibopenblas-openmp-dev - Optimized BLAS (linear algebra) library (dev, openmp)\nlibopenblas-pthread-dev - Optimized BLAS (linear algebra) library (dev,\npthread)\nlibopenblas-serial-dev - Optimized BLAS (linear algebra) library (dev, serial)\nlibopenblas0-openmp - Optimized BLAS (linear algebra) library (shared lib,\nopenmp)\nlibopenblas0-pthread - Optimized BLAS (linear algebra) library (shared lib,\npthread)\nlibopenblas0-serial - Optimized BLAS (linear algebra) library (shared lib,\nserial)\nroot@cd5ede8e1bc0:\/# \nroot@cd5ede8e1bc0:\/# apt-cache search liblapack.so   # ditto for lapack\nliblapack-dev - Library of linear algebra routines 3 - static version\nliblapack3 - Library of linear algebra routines 3 - shared version\nlibopenblas-openmp-dev - Optimized BLAS (linear algebra) library (dev, openmp)\nlibopenblas-pthread-dev - Optimized BLAS (linear algebra) library (dev,\npthread)\nlibopenblas-serial-dev - Optimized BLAS (linear algebra) library (dev, serial)\nlibopenblas0-openmp - Optimized BLAS (linear algebra) library (shared lib,\nopenmp)\nlibopenblas0-pthread - Optimized BLAS (linear algebra) library (shared lib,\npthread)\nlibopenblas0-serial - Optimized BLAS (linear algebra) library (shared lib,\nserial)\nroot@cd5ede8e1bc0:\/# \n```\n\nAs I recall there are (were ?) also third-party repositories providing the MKL\nif you want to test that.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1766870175.329359",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "ei+oW",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18986] Short-circuit crossprod and tcrossprod with ddot BLAS",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18986"
                            },
                            {
                                "type": "text",
                                "text": "\n\nDirk Eddelbuettel ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:edd@debian.org",
                                "text": "edd@debian.org"
                            },
                            {
                                "type": "text",
                                "text": ") changed:\n\n           What    |Removed                     |Added\n----------------------------------------------------------------------------\n                 CC|                            |edd@debian.org\n\n--- Comment #1 from Dirk Eddelbuettel ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:edd@debian.org",
                                "text": "edd@debian.org"
                            },
                            {
                                "type": "text",
                                "text": ") ---"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_quote",
                        "elements": [
                            {
                                "type": "text",
                                "text": " Unfortunately, I do not have access to other BLAS implementations or versions for further testing. "
                            }
                        ],
                        "contains_padding": true
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nThere is help. As LAPACK and BLAS are in fact interfaces, it is pretty easy to\nfire up a container, even one that already has R such 'r-base' aka\n'rocker\/r-base' (for Debian; we could use rocker\/r2u for Ubuntu and so on) and\nthen use "
                            },
                            {
                                "type": "text",
                                "text": "apt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " to install the different available LAPACK\/BLAS packages.  The\nfollowing is using "
                            },
                            {
                                "type": "text",
                                "text": "r-base",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and Debian:\n\n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_preformatted",
                        "elements": [
                            {
                                "type": "text",
                                "text": "root@cd5ede8e1bc0:\/# apt update -qq   # refresh the index\n62 packages can be upgraded. Run 'apt list --upgradable' to see them.\nroot@cd5ede8e1bc0:\/# apt-cache show libblas-dev  # to see the name of the\nvirtual pkg\nroot@cd5ede8e1bc0:\/# apt-cache search libblas.so  # find packages providing the\nvirtual one\nlibblis-openmp-dev - BLAS-like Library Instantiation Software Framework\n(dev,32bit,openmp)\nlibblis-pthread-dev - BLAS-like Library Instantiation Software Framework\n(dev,32bit,pthread)\nlibblis-serial-dev - BLAS-like Library Instantiation Software Framework\n(dev,32bit,serial)\nlibblis4-openmp - BLAS-like Library Instantiation Software Framework\n(32bit,openmp)\nlibblis4-pthread - BLAS-like Library Instantiation Software Framework\n(32bit,pthread)\nlibblis4-serial - BLAS-like Library Instantiation Software Framework\n(32bit,serial)\nlibblas-dev - Basic Linear Algebra Subroutines 3, static library\nlibblas3 - Basic Linear Algebra Reference implementations, shared library\nlibopenblas-openmp-dev - Optimized BLAS (linear algebra) library (dev, openmp)\nlibopenblas-pthread-dev - Optimized BLAS (linear algebra) library (dev,\npthread)\nlibopenblas-serial-dev - Optimized BLAS (linear algebra) library (dev, serial)\nlibopenblas0-openmp - Optimized BLAS (linear algebra) library (shared lib,\nopenmp)\nlibopenblas0-pthread - Optimized BLAS (linear algebra) library (shared lib,\npthread)\nlibopenblas0-serial - Optimized BLAS (linear algebra) library (shared lib,\nserial)\nroot@cd5ede8e1bc0:\/# \nroot@cd5ede8e1bc0:\/# apt-cache search liblapack.so   # ditto for lapack\nliblapack-dev - Library of linear algebra routines 3 - static version\nliblapack3 - Library of linear algebra routines 3 - shared version\nlibopenblas-openmp-dev - Optimized BLAS (linear algebra) library (dev, openmp)\nlibopenblas-pthread-dev - Optimized BLAS (linear algebra) library (dev,\npthread)\nlibopenblas-serial-dev - Optimized BLAS (linear algebra) library (dev, serial)\nlibopenblas0-openmp - Optimized BLAS (linear algebra) library (shared lib,\nopenmp)\nlibopenblas0-pthread - Optimized BLAS (linear algebra) library (shared lib,\npthread)\nlibopenblas0-serial - Optimized BLAS (linear algebra) library (shared lib,\nserial)\nroot@cd5ede8e1bc0:\/# \n"
                            }
                        ]
                    },
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "\n\nAs I recall there are (were ?) also third-party repositories providing the MKL\nif you want to test that."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18986] Short-circuit crossprod and tcrossprod with ddot BLAS*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18986>\n\n--- Comment #2 from Dirk Eddelbuettel (<mailto:edd@debian.org|edd@debian.org>) ---\nIntel MKL, or 'Intel oneAPI Matj Kernel Library', for installation via `apt` is\ndescribed here:  \n\n<https:\/\/www.intel.com\/content\/www\/us\/en\/developer\/tools\/oneapi\/onemkl-download.html?operatingsystem=linux&amp;linux-install=apt>\n\nThere are a number of other supported installers including `dnf` and `yump`.",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1766870684.545289",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "SGd",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18986] Short-circuit crossprod and tcrossprod with ddot BLAS",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18986"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #2 from Dirk Eddelbuettel ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:edd@debian.org",
                                "text": "edd@debian.org"
                            },
                            {
                                "type": "text",
                                "text": ") ---\nIntel MKL, or 'Intel oneAPI Matj Kernel Library', for installation via "
                            },
                            {
                                "type": "text",
                                "text": "apt",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " is\ndescribed here:  \n\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/www.intel.com\/content\/www\/us\/en\/developer\/tools\/oneapi\/onemkl-download.html?operatingsystem=linux&amp;linux-install=apt",
                                "text": "https:\/\/www.intel.com\/content\/www\/us\/en\/developer\/tools\/oneapi\/onemkl-download.html?operatingsystem=linux&linux-install=apt"
                            },
                            {
                                "type": "text",
                                "text": "\n\nThere are a number of other supported installers including "
                            },
                            {
                                "type": "text",
                                "text": "dnf",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": " and "
                            },
                            {
                                "type": "text",
                                "text": "yump",
                                "style": {
                                    "code": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "."
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "subtype": "bot_message",
        "text": "*[Bug 18986] Short-circuit crossprod and tcrossprod with ddot BLAS*\n<https:\/\/bugs.r-project.org\/show_bug.cgi?id=18986>\n\n--- Comment #3 from mgarb (<mailto:jan.garbuszus@ruhr-uni-bochum.de|jan.garbuszus@ruhr-uni-bochum.de>) ---\nThank you, Dirk! I'll look into it.\n\nA bit of googling turned up an older blog post by Radford Neal discussing this\nexact issue. [1]\n\n[1]\n<https:\/\/radfordneal.wordpress.com\/2011\/05\/21\/slowing-down-matrix-multiplication-in-r\/>",
        "username": "r-bugs notifier",
        "icons": {
            "emoji": ":robot_face:"
        },
        "type": "message",
        "ts": "1766878736.256479",
        "bot_id": "B06769YJX9Q",
        "app_id": "A024R9PQM",
        "blocks": [
            {
                "type": "rich_text",
                "block_id": "UUo",
                "elements": [
                    {
                        "type": "rich_text_section",
                        "elements": [
                            {
                                "type": "text",
                                "text": "[Bug 18986] Short-circuit crossprod and tcrossprod with ddot BLAS",
                                "style": {
                                    "bold": true
                                }
                            },
                            {
                                "type": "text",
                                "text": "\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/bugs.r-project.org\/show_bug.cgi?id=18986"
                            },
                            {
                                "type": "text",
                                "text": "\n\n--- Comment #3 from mgarb ("
                            },
                            {
                                "type": "link",
                                "url": "mailto:jan.garbuszus@ruhr-uni-bochum.de",
                                "text": "jan.garbuszus@ruhr-uni-bochum.de",
                                "unsafe": true
                            },
                            {
                                "type": "text",
                                "text": ") ---\nThank you, Dirk! I'll look into it.\n\nA bit of googling turned up an older blog post by Radford Neal discussing this\nexact issue. [1]\n\n[1]\n"
                            },
                            {
                                "type": "link",
                                "url": "https:\/\/radfordneal.wordpress.com\/2011\/05\/21\/slowing-down-matrix-multiplication-in-r\/"
                            }
                        ]
                    }
                ]
            }
        ]
    }
]